
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SQL Database Drivers &#8212; Qt for Python (Technology Preview)</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.11.0~a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
  <link rel="stylesheet" type="text/css" href="/style/pyside.css" />
  <link rel="icon" type="image/png" href="/style/pyside-32px.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/style/pyside-16px.png" sizes="16x16" />
  <script type="text/javascript"> wpThemeFolder = 'http://qt.io/wp-content/themes/oneqt'; </script>
  <script type="text/javascript" src="/scripts/main.js"></script>
  <script type="text/javascript" src="/scripts/extras.js"></script>
  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-54043535-2', 'qt.io');
    ga('set', 'forceSSL', true);
    ga('send', 'pageview');
  </script>

  </head>
  <body>
<div id="container">
    <div class="header">
        <div class="header_container">
            <header id="navbar">
            </header>
        </div>
    </div>
    <div class="main">
        <div class="main-rounded">
            <div class="navigationbar">
                <ul class="sub-navigation">
                    <li><a href="http://wiki.qt.io/">Wiki</a></li>
                    <li><a href="https://doc.qt.io/">Documentation</a></li>
                    <li><a href="http://forum.qt.io/">Forum</a></li>
                    <li><a href="https://bugreports.qt.io/">Bug Reports</a></li>
                    <li><a href="https://codereview.qt-project.org/">Code Review</a></li>
                </ul>
                <div id="main_title_bar"><h1>Qt Documentation</h1></div>
                <div class="related">
                    <ul>
                        <li><a href="../index.html">Qt for Python (Technology Preview)</a></li> 
                    </ul>
                </div>
            </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SQL Database Drivers</a><ul>
<li><a class="reference internal" href="#supported-databases">Supported Databases</a></li>
<li><a class="reference internal" href="#building-the-drivers">Building the Drivers</a></li>
<li><a class="reference internal" href="#driver-specifics">Driver Specifics</a></li>
<li><a class="reference internal" href="#qmysql-for-mysql-4-and-higher">QMYSQL for MySQL 4 and higher</a></li>
<li><a class="reference internal" href="#qmysql-stored-procedure-support">QMYSQL Stored Procedure Support</a></li>
<li><a class="reference internal" href="#embedded-mysql-server">Embedded MySQL Server</a></li>
<li><a class="reference internal" href="#how-to-build-the-qmysql-plugin-on-unix-and-macos">How to Build the QMYSQL Plugin on Unix and macOS</a></li>
<li><a class="reference internal" href="#how-to-build-the-qmysql-plugin-on-windows">How to Build the QMYSQL Plugin on Windows</a></li>
<li><a class="reference internal" href="#qoci-for-the-oracle-call-interface-oci">QOCI for the Oracle Call Interface (OCI)</a></li>
<li><a class="reference internal" href="#oci-user-authentication">OCI User Authentication</a></li>
<li><a class="reference internal" href="#oci-blob-lob-support">OCI BLOB/LOB Support</a></li>
<li><a class="reference internal" href="#how-to-build-the-oci-plugin-on-unix-and-macos">How to Build the OCI Plugin on Unix and macOS</a></li>
<li><a class="reference internal" href="#how-to-build-the-oci-plugin-on-windows">How to Build the OCI Plugin on Windows</a></li>
<li><a class="reference internal" href="#qodbc-for-open-database-connectivity-odbc">QODBC for Open Database Connectivity (ODBC)</a></li>
<li><a class="reference internal" href="#odbc-stored-procedure-support">ODBC Stored Procedure Support</a></li>
<li><a class="reference internal" href="#odbc-unicode-support">ODBC Unicode Support</a></li>
<li><a class="reference internal" href="#how-to-build-the-odbc-plugin-on-unix-and-macos">How to Build the ODBC Plugin on Unix and macOS</a></li>
<li><a class="reference internal" href="#how-to-build-the-odbc-plugin-on-windows">How to Build the ODBC Plugin on Windows</a></li>
<li><a class="reference internal" href="#qpsql-for-postgresql-version-7-3-and-above">QPSQL for PostgreSQL (Version 7.3 and Above)</a></li>
<li><a class="reference internal" href="#qpsql-unicode-support">QPSQL Unicode Support</a></li>
<li><a class="reference internal" href="#qpsql-blob-support">QPSQL BLOB Support</a></li>
<li><a class="reference internal" href="#qpsql-forward-only-query-support">QPSQL Forward-only query support</a></li>
<li><a class="reference internal" href="#how-to-build-the-qpsql-plugin-on-unix-and-macos">How to Build the QPSQL Plugin on Unix and macOS</a></li>
<li><a class="reference internal" href="#how-to-build-the-qpsql-plugin-on-windows">How to Build the QPSQL Plugin on Windows</a></li>
<li><a class="reference internal" href="#qtds-for-sybase-adaptive-server">QTDS for Sybase Adaptive Server</a></li>
<li><a class="reference internal" href="#how-to-build-the-qtds-plugin-on-unix-and-macos">How to Build the QTDS Plugin on Unix and macOS</a></li>
<li><a class="reference internal" href="#how-to-build-the-qdts-plugin-on-windows">How to Build the QDTS Plugin on Windows</a></li>
<li><a class="reference internal" href="#qdb2-for-ibm-db2-version-7-1-and-above">QDB2 for IBM DB2 (Version 7.1 and Above)</a></li>
<li><a class="reference internal" href="#how-to-build-the-qdb2-plugin-on-unix-and-macos">How to Build the QDB2 Plugin on Unix and macOS</a></li>
<li><a class="reference internal" href="#how-to-build-the-qdb2-plugin-on-windows">How to Build the QDB2 Plugin on Windows</a></li>
<li><a class="reference internal" href="#qsqlite2-for-sqlite-version-2">QSQLITE2 for SQLite Version 2</a></li>
<li><a class="reference internal" href="#qsqlite-for-sqlite-version-3-and-above">QSQLITE for SQLite (Version 3 and Above)</a></li>
<li><a class="reference internal" href="#how-to-build-the-qsqlite-plugin">How to Build the QSQLITE Plugin</a></li>
<li><a class="reference internal" href="#enable-regexp-operator">Enable REGEXP operator</a></li>
<li><a class="reference internal" href="#qsqlite-file-format-compatibility">QSQLITE File Format Compatibility</a></li>
<li><a class="reference internal" href="#qibase-for-borland-interbase">QIBASE for Borland InterBase</a></li>
<li><a class="reference internal" href="#qibase-unicode-support-and-text-encoding">QIBASE Unicode Support and Text Encoding</a></li>
<li><a class="reference internal" href="#qibase-stored-procedures">QIBASE Stored procedures</a></li>
<li><a class="reference internal" href="#how-to-build-the-qibase-plugin-on-unix-and-macos">How to Build the QIBASE Plugin on Unix and macOS</a></li>
<li><a class="reference internal" href="#how-to-build-the-qibase-plugin-on-windows">How to Build the QIBASE Plugin on Windows</a></li>
<li><a class="reference internal" href="#id53">Troubleshooting</a></li>
<li><a class="reference internal" href="#how-to-write-your-own-database-driver">How to Write Your Own Database Driver</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" id="q" size="18" />
      <input type="submit" value="Go" id="search_button" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sql-database-drivers">
<span id="id1"></span><h1>SQL Database Drivers<a class="headerlink" href="#sql-database-drivers" title="Permalink to this headline">¶</a></h1>
<p>How to configure and install Qt SQL drivers for supported databases</p>
<blockquote>
<div><p id="development"><span id="troubleshooting"></span><span id="qibase"></span><span id="qsqlite"></span><span id="qsqlite2"></span><span id="qdb2"></span><span id="qtds"></span><span id="qpsql"></span><span id="qodbc"></span><span id="qoci"></span><span id="qmysql"></span><span id="building"></span>How to configure and install Qt SQL drivers for supported databases.</p>
<p>The Qt SQL module uses driver plugins to communicate with the different database APIs. Since Qt’s SQL Module API is database-independent, all database-specific code is contained within these drivers. Several drivers are supplied with Qt, and other drivers can be added. The driver source code is supplied and can be used as a model for <a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">writing your own drivers</span></a> .</p>
</div></blockquote>
<div class="section" id="supported-databases">
<span id="id2"></span><h2>Supported Databases<a class="headerlink" href="#supported-databases" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The table below lists the drivers included with Qt:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Driver name</td>
<td>DBMS</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QDB2</span></a></td>
<td>IBM DB2 (version 7.1 and above)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QIBASE</span></a></td>
<td>Borland InterBase</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QMYSQL</span></a></td>
<td>MySQL</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QOCI</span></a></td>
<td>Oracle Call Interface Driver</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QODBC</span></a></td>
<td>Open Database Connectivity (ODBC) - Microsoft SQL Server and other ODBC-compliant databases</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QPSQL</span></a></td>
<td>PostgreSQL (versions 7.3 and above)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QSQLITE2</span></a></td>
<td>SQLite version 2</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QSQLITE</span></a></td>
<td>SQLite version 3</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">QTDS</span></a></td>
<td><p class="first">Sybase Adaptive Server</p>
<blockquote class="last">
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">obsolete from Qt 4.7</p>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>SQLite is the in-process database system with the best test coverage and support on all platforms. Oracle via OCI, PostgreSQL, and MySQL through either ODBC or a native driver are well-tested on Windows and Linux. The completeness of the support for other systems depends on the availability and quality of client libraries.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To build a driver plugin you need to have the appropriate client library for your Database Management System (DBMS). This provides access to the API exposed by the DBMS, and is typically shipped with it. Most installation programs also allow you to install “development libraries”, and these are what you need. These libraries are responsible for the low-level communication with the DBMS.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When using Qt under Open Source terms but with a proprietary database, verify the client library’s license compatibility with the LGPL.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="building-the-drivers">
<span id="id3"></span><span id="id4"></span><h2>Building the Drivers<a class="headerlink" href="#building-the-drivers" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Qt <code class="docutils literal"><span class="pre">configure</span></code> script tries to automatically detect the available client libraries on your machine. Run <code class="docutils literal"><span class="pre">configure</span> <span class="pre">-help</span></code> to see what drivers can be built. You should get an output similar to this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">...</span><span class="p">]</span>

<span class="n">Database</span> <span class="n">options</span><span class="p">:</span>

  <span class="o">-</span><span class="n">sql</span><span class="o">-&lt;</span><span class="n">driver</span><span class="o">&gt;</span> <span class="o">........</span> <span class="n">Enable</span> <span class="n">SQL</span> <span class="o">&lt;</span><span class="n">driver</span><span class="o">&gt;</span> <span class="n">plugin</span><span class="o">.</span> <span class="n">Supported</span> <span class="n">drivers</span><span class="p">:</span>
                         <span class="n">db2</span> <span class="n">ibase</span> <span class="n">mysql</span> <span class="n">oci</span> <span class="n">odbc</span> <span class="n">psql</span> <span class="n">sqlite2</span> <span class="n">sqlite</span> <span class="n">tds</span>
                         <span class="p">[</span><span class="nb">all</span> <span class="n">auto</span><span class="p">]</span>
  <span class="o">-</span><span class="n">sqlite</span> <span class="o">..............</span> <span class="n">Select</span> <span class="n">used</span> <span class="n">sqlite3</span> <span class="p">[</span><span class="n">system</span><span class="o">/</span><span class="n">qt</span><span class="p">]</span>

<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">configure</span></code> script cannot detect the necessary libraries and include files if they are not in the standard paths, so it may be necessary to specify these paths using the <code class="docutils literal"><span class="pre">*_INCDIR=</span></code> , <code class="docutils literal"><span class="pre">*_LIBDIR=</span></code> , or <code class="docutils literal"><span class="pre">*_PREFIX=</span></code> command-line options. For example, if your MySQL files are installed in <code class="docutils literal"><span class="pre">/usr/local/mysql</span></code> (or in <code class="docutils literal"><span class="pre">C:\mysql</span></code> on Windows), then pass the following parameter to configure: <code class="docutils literal"><span class="pre">MYSQL_PREFIX=/usr/local/mysql</span></code> (or <code class="docutils literal"><span class="pre">MYSQL_PREFIX=C:\mysql</span></code> for Windows). The particulars for each driver are explained below.</p>
<p>Due to the practicalities of dealing with external dependencies, only the SQLite3 plugin is shipped with binary builds of Qt. To be able to add additional drivers to the Qt installation without re-building all of Qt, it is possible to configure and build the <code class="docutils literal"><span class="pre">qtbase/src/plugins/sqldrivers</span></code> directory outside of a full Qt build directory. Note that it is not possible to <em>configure</em> each driver separately, only all of them at once. Drivers can be <em>built</em> separately, though. If the Qt build is configured with <code class="docutils literal"><span class="pre">-prefix</span></code> , it is necessary to install the plugins after building them, too. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers/mysql
make install
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="driver-specifics">
<span id="id5"></span><h2>Driver Specifics<a class="headerlink" href="#driver-specifics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div></div></blockquote>
</div>
<div class="section" id="qmysql-for-mysql-4-and-higher">
<span id="id6"></span><span id="id7"></span><h2>QMYSQL for MySQL 4 and higher<a class="headerlink" href="#qmysql-for-mysql-4-and-higher" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div></div></blockquote>
</div>
<div class="section" id="qmysql-stored-procedure-support">
<span id="id8"></span><h2>QMYSQL Stored Procedure Support<a class="headerlink" href="#qmysql-stored-procedure-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>MySQL 5 introduces stored procedure support at the SQL level, but no API to control IN, OUT, and INOUT parameters. Therefore, parameters have to be set and read using SQL commands instead of <code class="xref py py-func docutils literal"><span class="pre">QSqlQuery.bindValue()</span></code> .</p>
<p>Example stored procedure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">create</span> <span class="n">procedure</span> <span class="n">qtestproc</span> <span class="p">(</span><span class="n">OUT</span> <span class="n">param1</span> <span class="n">INT</span><span class="p">,</span> <span class="n">OUT</span> <span class="n">param2</span> <span class="n">INT</span><span class="p">)</span>
<span class="n">BEGIN</span>
    <span class="nb">set</span> <span class="n">param1</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
    <span class="nb">set</span> <span class="n">param2</span> <span class="o">=</span> <span class="mi">43</span><span class="p">;</span>
<span class="n">END</span>
</pre></div>
</div>
<p>Source code to access the OUT values:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QSqlQuery</span> <span class="n">q</span><span class="p">;</span>
<span class="n">q</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;call qtestproc (@outval1, @outval2)&quot;</span><span class="p">);</span>
<span class="n">q</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;select @outval1, @outval2&quot;</span><span class="p">);</span>
<span class="n">q</span><span class="o">.</span><span class="n">next</span><span class="p">();</span>
<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">q</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">q</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="o">//</span> <span class="n">outputs</span> <span class="s2">&quot;42&quot;</span> <span class="ow">and</span> <span class="s2">&quot;43&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">&#64;outval1</span></code> and <code class="docutils literal"><span class="pre">&#64;outval2</span></code> are variables local to the current connection and will not be affected by queries sent from another host or connection.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="embedded-mysql-server">
<span id="id9"></span><h2>Embedded MySQL Server<a class="headerlink" href="#embedded-mysql-server" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The MySQL embedded server is a drop-in replacement for the normal client library. With the embedded MySQL server, a MySQL server is not required to use MySQL functionality.</p>
<p>To use the embedded MySQL server, simply link the Qt plugin to <code class="docutils literal"><span class="pre">libmysqld</span></code> instead of <code class="docutils literal"><span class="pre">libmysqlclient</span></code> . This can be done by adding <code class="docutils literal"><span class="pre">MYSQL_LIBS=-lmysqld</span></code> to the configure command line.</p>
<p>Please refer to the MySQL documentation, chapter “libmysqld, the Embedded MySQL Server Library” for more information about the MySQL embedded server.</p>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qmysql-plugin-on-unix-and-macos">
<span id="id10"></span><h2>How to Build the QMYSQL Plugin on Unix and macOS<a class="headerlink" href="#how-to-build-the-qmysql-plugin-on-unix-and-macos" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>You need the MySQL header files, as well as the shared library <code class="docutils literal"><span class="pre">libmysqlclient.so</span></code> . Depending on your Linux distribution, you may need to install a package which is usually called “mysql-devel”.</p>
<p>Tell qmake where to find the MySQL header files and shared libraries (here it is assumed that MySQL is installed in <code class="docutils literal"><span class="pre">/usr/local</span></code> ) and run <code class="docutils literal"><span class="pre">make</span></code> :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- MYSQL_PREFIX=/usr/local
make sub-mysql
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qmysql-plugin-on-windows">
<span id="id11"></span><h2>How to Build the QMYSQL Plugin on Windows<a class="headerlink" href="#how-to-build-the-qmysql-plugin-on-windows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>You need to get the MySQL installation files. Run <code class="docutils literal"><span class="pre">SETUP.EXE</span></code> and choose “Custom Install”. Install the “Libs &amp; Include Files” Module. Build the plugin as follows (here it is assumed that MySQL is installed in <code class="docutils literal"><span class="pre">C:\MySQL</span></code> ):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span> <span class="o">--</span> <span class="n">MYSQL_INCDIR</span><span class="o">=</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">MySQL</span><span class="o">/</span><span class="n">include</span> <span class="s2">&quot;MYSQL_LIBDIR=C:/MYSQL/MySQL Server &lt;version&gt;/lib/opt&quot;</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">mysql</span>
</pre></div>
</div>
<p>If you are not using a Microsoft compiler, replace <code class="docutils literal"><span class="pre">nmake</span></code> with <code class="docutils literal"><span class="pre">mingw32-make</span></code> in the line above.</p>
</div></blockquote>
</div>
<div class="section" id="qoci-for-the-oracle-call-interface-oci">
<span id="id12"></span><span id="id13"></span><h2>QOCI for the Oracle Call Interface (OCI)<a class="headerlink" href="#qoci-for-the-oracle-call-interface-oci" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Qt OCI plugin supports Oracle 9i, 10g and higher. After connecting to the Oracle server, the plugin will auto-detect the database version and enable features accordingly.</p>
<p>It’s possible to connect to a Oracle database without a tnsnames.ora file. This requires that the database SID is passed to the driver as the database name, and that a hostname is given.</p>
</div></blockquote>
</div>
<div class="section" id="oci-user-authentication">
<span id="id14"></span><h2>OCI User Authentication<a class="headerlink" href="#oci-user-authentication" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Qt OCI plugin supports authentication using external credentials (OCI_CRED_EXT). Usually, this means that the database server will use the user authentication provided by the operating system instead of its own authentication mechanism.</p>
<p>Leave the username and password empty when opening a connection with <a class="reference internal" href="../PySide2/QtSql/QSqlDatabase.html#PySide2.QtSql.QSqlDatabase" title="PySide2.QtSql.QSqlDatabase"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDatabase</span></code></a> to use the external credentials authentication.</p>
</div></blockquote>
</div>
<div class="section" id="oci-blob-lob-support">
<span id="id15"></span><h2>OCI BLOB/LOB Support<a class="headerlink" href="#oci-blob-lob-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Binary Large Objects (BLOBs) can be read and written, but be aware that this process may require a lot of memory. You should use a forward only query to select LOB fields (see <code class="xref py py-func docutils literal"><span class="pre">QSqlQuery.setForwardOnly()</span></code> ).</p>
<p>Inserting BLOBs should be done using either a prepared query where the BLOBs are bound to placeholders or <a class="reference internal" href="../PySide2/QtSql/QSqlTableModel.html#PySide2.QtSql.QSqlTableModel" title="PySide2.QtSql.QSqlTableModel"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlTableModel</span></code></a> , which uses a prepared query to do this internally.</p>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-oci-plugin-on-unix-and-macos">
<span id="id16"></span><h2>How to Build the OCI Plugin on Unix and macOS<a class="headerlink" href="#how-to-build-the-oci-plugin-on-unix-and-macos" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>For Oracle 10g, all you need is the “Instant Client Package - Basic” and “Instant Client Package - SDK”. For Oracle prior to 10g, you require the standard Oracle client and the SDK packages.</p>
<p>Oracle library files required to build the driver:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">libclntsh.so</span></code> (all versions)</li>
<li><code class="docutils literal"><span class="pre">libwtc9.so</span></code> (only Oracle 9)</li>
</ul>
<p>Tell <code class="docutils literal"><span class="pre">qmake</span></code> where to find the Oracle header files and shared libraries and run make:</p>
<p>For Oracle version 9:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- &quot;OCI_INCDIR=$ORACLE_HOME/rdbms/public&quot; OCI_LIBDIR=$ORACLE_HOME/lib &quot;OCI_LIBS=-lclntsh -lwtc9&quot;
make sub-oci
</pre></div>
</div>
<p>For Oracle version 10, we assume that you installed the RPM packages of the Instant Client Package SDK (you need to adjust the version number accordingly):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- OCI_INCDIR=/usr/include/oracle/10.1.0.3/client OCI_LIBDIR=/usr/lib/oracle/10.1.0.3/client/lib
make sub-oci
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are using the Oracle Instant Client package, you will need to set LD_LIBRARY_PATH when building the OCI SQL plugin, and when running an application that uses the OCI SQL plugin. You can avoid this requirement by setting RPATH, and listing all of the libraries to link to. Here is an example:</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">configure</span> <span class="n">OCI_INCDIR</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">oracle</span><span class="o">/</span><span class="mf">10.1</span><span class="o">.</span><span class="mf">0.3</span><span class="o">/</span><span class="n">client</span> <span class="n">OCI_LIBDIR</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">oracle</span><span class="o">/</span><span class="mf">10.1</span><span class="o">.</span><span class="mf">0.3</span><span class="o">/</span><span class="n">client</span><span class="o">/</span><span class="n">lib</span> <span class="o">-</span><span class="n">R</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">oracle</span><span class="o">/</span><span class="mf">10.1</span><span class="o">.</span><span class="mf">0.3</span><span class="o">/</span><span class="n">client</span><span class="o">/</span><span class="n">lib</span> <span class="s2">&quot;OCI_LIBS=-lclntsh -lnnz10&quot;</span>
<span class="n">make</span>
</pre></div>
</div>
<p>If you wish to build the OCI plugin manually with this method, the procedure looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- OCI_INCDIR=/usr/include/oracle/10.1.0.3/client OCI_LIBDIR=/usr/lib/oracle/10.1.0.3/client/lib &quot;OCI_LIBS=-Wl,-rpath,/usr/lib/oracle/10.1.0.3/client/lib -lclntsh -lnnz10&quot;
make sub-oci
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-oci-plugin-on-windows">
<span id="id17"></span><h2>How to Build the OCI Plugin on Windows<a class="headerlink" href="#how-to-build-the-oci-plugin-on-windows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Choosing the option “Programmer” in the Oracle Client Installer from the Oracle Client Installation CD is generally sufficient to build the plugin. For some versions of Oracle Client, you may also need to select the “Call Interface (OCI)” option if it is available.</p>
<p>Build the plugin as follows (here it is assumed that Oracle Client is installed in <code class="docutils literal"><span class="pre">C:\oracle</span></code> ):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span> <span class="o">--</span> <span class="n">OCI_INCDIR</span><span class="o">=</span><span class="n">c</span><span class="p">:</span><span class="o">/</span><span class="n">oracle</span><span class="o">/</span><span class="n">oci</span><span class="o">/</span><span class="n">include</span> <span class="n">OCI_LIBDIR</span><span class="o">=</span><span class="n">c</span><span class="p">:</span><span class="o">/</span><span class="n">oracle</span><span class="o">/</span><span class="n">oci</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">msvc</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">oci</span>
</pre></div>
</div>
<p>If you are not using a Microsoft compiler, replace <code class="docutils literal"><span class="pre">nmake</span></code> with <code class="docutils literal"><span class="pre">mingw32-make</span></code> in the line above.</p>
<p>When you run your application, you will also need to add the <code class="docutils literal"><span class="pre">oci.dll</span></code> path to your <code class="docutils literal"><span class="pre">PATH</span></code> environment variable:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">PATH</span><span class="o">=%</span><span class="n">PATH</span><span class="o">%</span><span class="p">;</span><span class="n">c</span><span class="p">:</span>\<span class="n">oracle</span>\<span class="nb">bin</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="qodbc-for-open-database-connectivity-odbc">
<span id="id18"></span><span id="id19"></span><h2>QODBC for Open Database Connectivity (ODBC)<a class="headerlink" href="#qodbc-for-open-database-connectivity-odbc" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>ODBC is a general interface that allows you to connect to multiple DBMSs using a common interface. The QODBC driver allows you to connect to an ODBC driver manager and access the available data sources. Note that you also need to install and configure ODBC drivers for the ODBC driver manager that is installed on your system. The QODBC plugin then allows you to use these data sources in your Qt applications.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should use the native driver, if it is available, instead of the ODBC driver. ODBC support can be used as a fallback for compliant databases if no native driver is available.</p>
</div>
<p>On Windows, an ODBC driver manager should be installed by default. For Unix systems, there are some implementations which must be installed first. Note that every end user of your application is required to have an ODBC driver manager installed, otherwise the QODBC plugin will not work.</p>
<p>When connecting to an ODBC datasource, you should pass the name of the ODBC datasource to the <code class="xref py py-func docutils literal"><span class="pre">QSqlDatabase.setDatabaseName()</span></code> function, rather than the actual database name.</p>
<p>The QODBC Plugin needs an ODBC compliant driver manager version 2.0 or later. Some ODBC drivers claim to be version-2.0-compliant, but do not offer all the necessary functionality. The QODBC plugin therefore checks whether the data source can be used after a connection has been established, and refuses to work if the check fails. If you do not like this behavior, you can remove the <code class="docutils literal"><span class="pre">#define</span> <span class="pre">ODBC_CHECK_DRIVER</span></code> line from the file <code class="docutils literal"><span class="pre">qsql_odbc.cpp</span></code> . Do this at your own risk!</p>
<p>By default, Qt instructs the ODBC driver to behave as an ODBC 2.x driver. However, for some <em>driver-manager/ODBC 3.x-driver</em> combinations (e.g., <em>unixODBC/MaxDB ODBC</em> ), telling the ODBC driver to behave as a 2.x driver can cause the driver plugin to have unexpected behavior. To avoid this problem, instruct the ODBC driver to behave as a 3.x driver by <code class="xref py py-func docutils literal"><span class="pre">setting</span> <span class="pre">the</span> <span class="pre">connect</span> <span class="pre">option</span></code> <code class="docutils literal"><span class="pre">&quot;SQL_ATTR_ODBC_VERSION=SQL_OV_ODBC3&quot;</span></code> before you <code class="xref py py-func docutils literal"><span class="pre">open</span> <span class="pre">your</span> <span class="pre">database</span> <span class="pre">connection</span></code> . Note that this will affect multiple aspects of ODBC driver behavior, e.g., the SQLSTATEs. Before setting this connect option, consult your ODBC documentation about behavior differences you can expect.</p>
<p>When using the SAP HANA database, the connection has to be established using the option “SCROLLABLERESULT=TRUE”, as the HANA ODBC driver does not provide scrollable results by default, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QSqlDatabase</span> <span class="n">db</span> <span class="o">=</span> <span class="n">QSqlDatabase</span><span class="p">::</span><span class="n">addDatabase</span><span class="p">(</span><span class="s2">&quot;QODBC3&quot;</span><span class="p">);</span>
<span class="n">QString</span> <span class="n">connectString</span> <span class="o">=</span> <span class="n">QStringLiteral</span><span class="p">(</span>
    <span class="s2">&quot;DRIVER=/path/to/installation/libodbcHDB.so;&quot;</span>
    <span class="s2">&quot;SERVERNODE=hostname:port;&quot;</span>
    <span class="s2">&quot;UID=USER;&quot;</span>
    <span class="s2">&quot;PWD=PASSWORD;&quot;</span>
    <span class="s2">&quot;SCROLLABLERESULT=true&quot;</span><span class="p">);</span>
<span class="n">db</span><span class="o">.</span><span class="n">setDatabaseName</span><span class="p">(</span><span class="n">connectString</span><span class="p">);</span>
</pre></div>
</div>
<p>If you experience very slow access of the ODBC datasource, make sure that ODBC call tracing is turned off in the ODBC datasource manager.</p>
<p>Some drivers do not support scrollable cursors. In that case, only queries in forwardOnly mode can be used successfully.</p>
</div></blockquote>
</div>
<div class="section" id="odbc-stored-procedure-support">
<span id="id20"></span><h2>ODBC Stored Procedure Support<a class="headerlink" href="#odbc-stored-procedure-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>With Microsoft SQL Server the result set returned by a stored procedure that uses the return statement, or returns multiple result sets, will be accessible only if you set the query’s forward only mode to <em>forward</em> using <code class="xref py py-func docutils literal"><span class="pre">QSqlQuery.setForwardOnly()</span></code> .</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">STORED_PROC</span> <span class="n">uses</span> <span class="n">the</span> <span class="k">return</span> <span class="n">statement</span> <span class="ow">or</span> <span class="n">returns</span> <span class="n">multiple</span> <span class="n">result</span> <span class="n">sets</span>
<span class="n">QSqlQuery</span> <span class="n">query</span><span class="p">;</span>
<span class="n">query</span><span class="o">.</span><span class="n">setForwardOnly</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
<span class="n">query</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;{call STORED_PROC}&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The value returned by the stored procedure’s return statement is discarded.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="odbc-unicode-support">
<span id="id21"></span><h2>ODBC Unicode Support<a class="headerlink" href="#odbc-unicode-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The QODBC Plugin will use the Unicode API if UNICODE is defined. On Windows NT based systems, this is the default. Note that the ODBC driver and the DBMS must also support Unicode.</p>
<p>Some driver managers and drivers do not support UNICODE. To use the QODBC plugin with such drivers, it has to be compiled with Q_ODBC_VERSION_2 defined.</p>
<p>For the Oracle 9 ODBC driver (Windows), it is necessary to check “SQL_WCHAR support” in the ODBC driver manager otherwise Oracle will convert all Unicode strings to local 8-bit.</p>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-odbc-plugin-on-unix-and-macos">
<span id="id22"></span><h2>How to Build the ODBC Plugin on Unix and macOS<a class="headerlink" href="#how-to-build-the-odbc-plugin-on-unix-and-macos" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>It is recommended that you use unixODBC. You can find the latest version and ODBC drivers at <a class="reference external" href="http://www.unixodbc.org">http://www.unixodbc.org</a>. You need the unixODBC header files and shared libraries.</p>
<p>Tell <code class="docutils literal"><span class="pre">qmake</span></code> where to find the unixODBC header files and shared libraries (here it is assumed that unixODBC is installed in <code class="docutils literal"><span class="pre">/usr/local/unixODBC</span></code> ) and run <code class="docutils literal"><span class="pre">make</span></code> :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- ODBC_PREFIX=/usr/local/unixODBC
make sub-odbc
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-odbc-plugin-on-windows">
<span id="id23"></span><h2>How to Build the ODBC Plugin on Windows<a class="headerlink" href="#how-to-build-the-odbc-plugin-on-windows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The ODBC header and include files should already be installed in the right directories. You just have to build the plugin as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">odbc</span>
</pre></div>
</div>
<p>If you are not using a Microsoft compiler, replace <code class="docutils literal"><span class="pre">nmake</span></code> with <code class="docutils literal"><span class="pre">mingw32-make</span></code> in the line above.</p>
</div></blockquote>
</div>
<div class="section" id="qpsql-for-postgresql-version-7-3-and-above">
<span id="id24"></span><span id="id25"></span><h2>QPSQL for PostgreSQL (Version 7.3 and Above)<a class="headerlink" href="#qpsql-for-postgresql-version-7-3-and-above" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The QPSQL driver supports version 7.3 and higher of the PostgreSQL server.</p>
<p>For more information about PostgreSQL visit <a class="reference external" href="http://www.postgresql.org">http://www.postgresql.org</a>.</p>
</div></blockquote>
</div>
<div class="section" id="qpsql-unicode-support">
<span id="id26"></span><h2>QPSQL Unicode Support<a class="headerlink" href="#qpsql-unicode-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The QPSQL driver automatically detects whether the PostgreSQL database you are connecting to supports Unicode or not. Unicode is automatically used if the server supports it. Note that the driver only supports the UTF-8 encoding. If your database uses any other encoding, the server must be compiled with Unicode conversion support.</p>
<p>Unicode support was introduced in PostgreSQL version 7.1 and it will only work if both the server and the client library have been compiled with multibyte support. More information about how to set up a multibyte enabled PostgreSQL server can be found in the PostgreSQL Administrator Guide, Chapter 5.</p>
</div></blockquote>
</div>
<div class="section" id="qpsql-blob-support">
<span id="id27"></span><h2>QPSQL BLOB Support<a class="headerlink" href="#qpsql-blob-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Binary Large Objects are supported through the <code class="docutils literal"><span class="pre">BYTEA</span></code> field type in PostgreSQL server versions &gt;= 7.1.</div></blockquote>
</div>
<div class="section" id="qpsql-forward-only-query-support">
<span id="id28"></span><h2>QPSQL Forward-only query support<a class="headerlink" href="#qpsql-forward-only-query-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>To use forward-only queries, you must build the QPSQL plugin with PostreSQL client library version 9.2 or later. If the plugin is built with an older version, then forward-only mode will not be available - calling <code class="xref py py-func docutils literal"><span class="pre">QSqlQuery.setForwardOnly()</span></code> with <code class="docutils literal"><span class="pre">true</span></code> will have no effect.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you build the QPSQL plugin with PostgreSQL version 9.2 or later, then you must distribute your application with libpq version 9.2 or later. Otherwise, loading the QPSQL plugin will fail with the following message:</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QSqlDatabase</span><span class="p">:</span> <span class="n">QPSQL</span> <span class="n">driver</span> <span class="ow">not</span> <span class="n">loaded</span>
<span class="n">QSqlDatabase</span><span class="p">:</span> <span class="n">available</span> <span class="n">drivers</span><span class="p">:</span> <span class="n">QSQLITE</span> <span class="n">QMYSQL</span> <span class="n">QMYSQL3</span> <span class="n">QODBC</span> <span class="n">QODBC3</span> <span class="n">QPSQL</span> <span class="n">QPSQL7</span>
<span class="n">Could</span> <span class="ow">not</span> <span class="n">create</span> <span class="n">database</span> <span class="nb">object</span>
</pre></div>
</div>
<p>While navigating the results in forward-only mode, the handle of <a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> may change. Applications that use the low-level handle of SQL result must get a new handle after each call to any of <a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> fetch functions. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QSqlQuery</span> <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
<span class="n">query</span><span class="o">.</span><span class="n">setForwardOnly</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
<span class="n">query</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM table&quot;</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">next</span><span class="p">())</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">Handle</span> <span class="n">changes</span> <span class="ow">in</span> <span class="n">every</span> <span class="n">iteration</span> <span class="n">of</span> <span class="n">the</span> <span class="n">loop</span>
    <span class="n">QVariant</span> <span class="n">v</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">handle</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">qstrcmp</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">typeName</span><span class="p">(),</span> <span class="s2">&quot;PGresult*&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PGresult</span> <span class="o">*</span><span class="n">handle</span> <span class="o">=</span> <span class="o">*</span><span class="n">static_cast</span><span class="o">&lt;</span><span class="n">PGresult</span> <span class="o">**&gt;</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">data</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">handle</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Do</span> <span class="n">something</span><span class="o">...</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>While reading the results of a forward-only query with PostgreSQL, the database connection cannot be used to execute other queries. This is a limitation of libpq library. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">value</span><span class="p">;</span>
<span class="n">QSqlQuery</span> <span class="n">query1</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
<span class="n">query1</span><span class="o">.</span><span class="n">setForwardOnly</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
<span class="n">query1</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;select * FROM table1&quot;</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="n">query1</span><span class="o">.</span><span class="n">next</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">query1</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">toInt</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">QSqlQuery</span> <span class="n">query2</span><span class="p">(</span><span class="n">db</span><span class="p">);</span>
        <span class="n">query2</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;update table2 set col=2&quot;</span><span class="p">);</span>  <span class="o">//</span> <span class="n">WRONG</span><span class="p">:</span> <span class="n">This</span> <span class="n">will</span> <span class="n">discard</span> <span class="nb">all</span> <span class="n">results</span> <span class="n">of</span>
    <span class="p">}</span>                                            <span class="o">//</span> <span class="n">query1</span><span class="p">,</span> <span class="ow">and</span> <span class="n">cause</span> <span class="n">the</span> <span class="n">loop</span> <span class="n">to</span> <span class="n">quit</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This problem will not occur if query1 and query2 use different database connections, or if we execute query2 after the while loop.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some methods of <a class="reference internal" href="../PySide2/QtSql/QSqlDatabase.html#PySide2.QtSql.QSqlDatabase" title="PySide2.QtSql.QSqlDatabase"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDatabase</span></code></a> like <a class="reference internal" href="richtext-cursor.html#the-qtextcursor-interface"><span class="std std-ref">tables()</span></a> , primaryIndex() implicity execute SQL queries, so these also cannot be used while navigating the results of forward-only query.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">QPSQL will print the following warning if it detects a loss of query results:</p>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QPSQLDriver</span><span class="p">::</span><span class="n">getResult</span><span class="p">:</span> <span class="n">Query</span> <span class="n">results</span> <span class="n">lost</span> <span class="o">-</span> <span class="n">probably</span> <span class="n">discarded</span> <span class="n">on</span> <span class="n">executing</span> <span class="n">another</span> <span class="n">SQL</span> <span class="n">query</span><span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qpsql-plugin-on-unix-and-macos">
<span id="id29"></span><h2>How to Build the QPSQL Plugin on Unix and macOS<a class="headerlink" href="#how-to-build-the-qpsql-plugin-on-unix-and-macos" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>You need the PostgreSQL client library and headers installed.</p>
<p>To make <code class="docutils literal"><span class="pre">qmake</span></code> find the PostgreSQL header files and shared libraries, run <code class="docutils literal"><span class="pre">qmake</span></code> the following way (assuming that the PostgreSQL client is installed in <code class="docutils literal"><span class="pre">/usr</span></code> ):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- PSQL_INCDIR=/usr/include/pgsql
make sub-psql
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qpsql-plugin-on-windows">
<span id="id30"></span><h2>How to Build the QPSQL Plugin on Windows<a class="headerlink" href="#how-to-build-the-qpsql-plugin-on-windows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Install the appropriate PostgreSQL developer libraries for your compiler. Assuming that PostgreSQL was installed in <code class="docutils literal"><span class="pre">C:\psql</span></code> , build the plugin as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span> <span class="o">--</span> <span class="n">PSQL_INCDIR</span><span class="o">=</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">psql</span><span class="o">/</span><span class="n">include</span> <span class="n">PSQL_LIBDIR</span><span class="o">=</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">psql</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ms</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">psql</span>
</pre></div>
</div>
<p>Users of MinGW may wish to consult the following online document: PostgreSQL MinGW/Native Windows.</p>
</div></blockquote>
</div>
<div class="section" id="qtds-for-sybase-adaptive-server">
<span id="id31"></span><span id="id32"></span><h2>QTDS for Sybase Adaptive Server<a class="headerlink" href="#qtds-for-sybase-adaptive-server" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">TDS is no longer used by MS Sql Server, and is superseded by <a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">ODBC</span></a> . QTDS is obsolete from Qt 4.7.</p>
</div>
<p>It is not possible to set the port with <code class="xref py py-func docutils literal"><span class="pre">QSqlDatabase.setPort()</span></code> due to limitations in the Sybase client library. Refer to the Sybase documentation for information on how to set up a Sybase client configuration file to enable connections to databases on non-default ports.</p>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qtds-plugin-on-unix-and-macos">
<span id="id33"></span><h2>How to Build the QTDS Plugin on Unix and macOS<a class="headerlink" href="#how-to-build-the-qtds-plugin-on-unix-and-macos" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Under Unix, two libraries are available which support the TDS protocol:</p>
<ul class="simple">
<li>FreeTDS, a free implementation of the TDS protocol (<a class="reference external" href="http://www.freetds.org">http://www.freetds.org</a>).</li>
<li>Sybase Open Client, available from <a class="reference external" href="https://support.sap.com">https://support.sap.com</a>.</li>
</ul>
<p>Regardless of which library you use, the shared object file <code class="docutils literal"><span class="pre">libsybdb.so</span></code> is needed. Set the <code class="docutils literal"><span class="pre">SYBASE</span></code> environment variable to point to the directory where you installed the client library and execute <code class="docutils literal"><span class="pre">qmake</span></code> :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- TDS_PREFIX=$SYBASE
make sub-tds
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qdts-plugin-on-windows">
<span id="id34"></span><h2>How to Build the QDTS Plugin on Windows<a class="headerlink" href="#how-to-build-the-qdts-plugin-on-windows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>You can either use the DB-Library supplied by Microsoft or the Sybase Open Client (<a class="reference external" href="https://support.sap.com">https://support.sap.com</a>). Configure will try to find NTWDBLIB.LIB to build the plugin:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">tds</span>
</pre></div>
</div>
<p>By default, the Microsoft library is used on Windows. If you want to force the use of the Sybase Open Client, you must define <code class="docutils literal"><span class="pre">Q_USE_SYBASE</span></code> in <code class="docutils literal"><span class="pre">%QTDIR%\qtbase\src\plugins\sqldrivers\tds\qsql_tds.cpp</span></code> .</p>
<p>If you are not using a Microsoft compiler, replace <code class="docutils literal"><span class="pre">nmake</span></code> with <code class="docutils literal"><span class="pre">mingw32-make</span></code> in the line above.</p>
</div></blockquote>
</div>
<div class="section" id="qdb2-for-ibm-db2-version-7-1-and-above">
<span id="id35"></span><span id="id36"></span><h2>QDB2 for IBM DB2 (Version 7.1 and Above)<a class="headerlink" href="#qdb2-for-ibm-db2-version-7-1-and-above" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Qt DB2 plugin makes it possible to access IBM DB2 databases. It has been tested with IBM DB2 v7.1 and 7.2. You must install the IBM DB2 development client library, which contains the header and library files necessary for compiling the QDB2 plugin.</p>
<p>The QDB2 driver supports prepared queries, reading/writing of Unicode strings and reading/writing of BLOBs.</p>
<p>We suggest using a forward-only query when calling stored procedures in DB2 (see <code class="xref py py-func docutils literal"><span class="pre">QSqlQuery.setForwardOnly()</span></code> ).</p>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qdb2-plugin-on-unix-and-macos">
<span id="id37"></span><h2>How to Build the QDB2 Plugin on Unix and macOS<a class="headerlink" href="#how-to-build-the-qdb2-plugin-on-unix-and-macos" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- DB2_PREFIX=$DB2DIR
make sub-db2
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qdb2-plugin-on-windows">
<span id="id38"></span><h2>How to Build the QDB2 Plugin on Windows<a class="headerlink" href="#how-to-build-the-qdb2-plugin-on-windows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The DB2 header and include files should already be installed in the right directories. You just have to build the plugin as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span> <span class="o">--</span> <span class="s2">&quot;DB2_PREFIX=&lt;DB2 home&gt;/sqllib&quot;</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">db2</span>
</pre></div>
</div>
<p>If you are not using a Microsoft compiler, replace <code class="docutils literal"><span class="pre">nmake</span></code> with <code class="docutils literal"><span class="pre">mingw32-make</span></code> in the line above.</p>
</div></blockquote>
</div>
<div class="section" id="qsqlite2-for-sqlite-version-2">
<span id="id39"></span><span id="id40"></span><h2>QSQLITE2 for SQLite Version 2<a class="headerlink" href="#qsqlite2-for-sqlite-version-2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The Qt SQLite 2 plugin is offered for compatibility. Whenever possible, use the <a class="reference internal" href="#sql-database-drivers"><span class="std std-ref">version 3 plugin</span></a> instead. The build instructions for version 3 apply to version 2 as well.</div></blockquote>
</div>
<div class="section" id="qsqlite-for-sqlite-version-3-and-above">
<span id="id41"></span><span id="id42"></span><h2>QSQLITE for SQLite (Version 3 and Above)<a class="headerlink" href="#qsqlite-for-sqlite-version-3-and-above" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Qt SQLite plugin makes it possible to access SQLite databases. SQLite is an in-process database, which means that it is not necessary to have a database server. SQLite operates on a single file, which must be set as the database name when opening a connection. If the file does not exist, SQLite will try to create it. SQLite also supports in-memory and temporary databases. Simply pass respectively “:memory:” or an empty string as the database name.</p>
<p>SQLite has some restrictions regarding multiple users and multiple transactions. If you try to read/write on a resource from different transactions, your application might freeze until one transaction commits or rolls back. The Qt SQLite driver will retry to write to a locked resource until it runs into a timeout (see <code class="docutils literal"><span class="pre">QSQLITE_BUSY_TIMEOUT</span></code> at <code class="xref py py-func docutils literal"><span class="pre">QSqlDatabase.setConnectOptions()</span></code> ).</p>
<p>In SQLite any column, with the exception of an INTEGER PRIMARY KEY column, may be used to store any type of value. For instance, a column declared as INTEGER may contain an integer value in one row and a text value in the next. This is due to SQLite associating the type of a value with the value itself rather than with the column it is stored in. A consequence of this is that the type returned by <code class="xref py py-func docutils literal"><span class="pre">QSqlField.type()</span></code> only indicates the field’s recommended type. No assumption of the actual type should be made from this and the type of the individual values should be checked.</p>
<p>The driver is locked for updates while a select is executed. This may cause problems when using <a class="reference internal" href="../PySide2/QtSql/QSqlTableModel.html#PySide2.QtSql.QSqlTableModel" title="PySide2.QtSql.QSqlTableModel"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlTableModel</span></code></a> because Qt’s item views fetch data as needed (with QSqlQuery::fetchMore() in the case of <a class="reference internal" href="../PySide2/QtSql/QSqlTableModel.html#PySide2.QtSql.QSqlTableModel" title="PySide2.QtSql.QSqlTableModel"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlTableModel</span></code></a> ).</p>
<p>You can find information about SQLite on <a class="reference external" href="http://www.sqlite.org">http://www.sqlite.org</a>.</p>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qsqlite-plugin">
<span id="id43"></span><h2>How to Build the QSQLITE Plugin<a class="headerlink" href="#how-to-build-the-qsqlite-plugin" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>SQLite version 3 is included as a third-party library within Qt. It can be built by passing the <code class="docutils literal"><span class="pre">-qt-sqlite</span></code> parameter to the configure script.</p>
<p>If you do not want to use the SQLite library included with Qt, you can pass <code class="docutils literal"><span class="pre">-system-sqlite</span></code> to the configure script to use the SQLite libraries of the operating system. This is recommended whenever possible, as it reduces the installation size and removes one component for which you need to track security advisories.</p>
<p>On Unix and <span class="xref std std-ref">macOS</span> (replace <code class="docutils literal"><span class="pre">$SQLITE</span></code> with the directory where SQLite resides):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- -system-sqlite SQLITE3_PREFIX=$SQLITE
make sub-sqlite
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span> <span class="o">--</span> <span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">sqlite</span> <span class="n">SQLITE3_PREFIX</span><span class="o">=</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">SQLITE</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">sqlite</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="enable-regexp-operator">
<span id="id44"></span><h2>Enable REGEXP operator<a class="headerlink" href="#enable-regexp-operator" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>SQLite comes with a REGEXP operation. However the needed implementation must be provided by the user. For convenience a default implementation can be enabled by <code class="xref py py-func docutils literal"><span class="pre">setting</span> <span class="pre">the</span> <span class="pre">connect</span> <span class="pre">option</span></code> <code class="docutils literal"><span class="pre">QSQLITE_ENABLE_REGEXP</span></code> before <code class="xref py py-func docutils literal"><span class="pre">the</span> <span class="pre">database</span> <span class="pre">connection</span> <span class="pre">is</span> <span class="pre">opened</span></code> . Then a SQL statement like “column REGEXP ‘pattern’” basically expands to the Qt code</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">column</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">QRegularExpression</span><span class="p">(</span><span class="s2">&quot;pattern&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>For better performance the regular expressions are cached internally. By default the cache size is 25, but it can be changed through the option’s value. For example passing “<code class="docutils literal"><span class="pre">QSQLITE_ENABLE_REGEXP=10</span></code> ” reduces the cache size to 10.</p>
</div></blockquote>
</div>
<div class="section" id="qsqlite-file-format-compatibility">
<span id="id45"></span><h2>QSQLITE File Format Compatibility<a class="headerlink" href="#qsqlite-file-format-compatibility" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>SQLite minor releases sometimes break file format forward compatibility. For example, SQLite 3.3 can read database files created with SQLite 3.2, but databases created with SQLite 3.3 cannot be read by SQLite 3.2. Please refer to the SQLite documentation and change logs for information about file format compatibility between versions.</p>
<p>Qt minor releases usually follow the SQLite minor releases, while Qt patch releases follow SQLite patch releases. Patch releases are therefore both backward and forward compatible.</p>
<p>To force SQLite to use a specific file format, it is necessary to build and ship your own database plugin with your own SQLite library as illustrated above. Some versions of SQLite can be forced to write a specific file format by setting the <code class="docutils literal"><span class="pre">SQLITE_DEFAULT_FILE_FORMAT</span></code> define when building SQLite.</p>
</div></blockquote>
</div>
<div class="section" id="qibase-for-borland-interbase">
<span id="id46"></span><span id="id47"></span><h2>QIBASE for Borland InterBase<a class="headerlink" href="#qibase-for-borland-interbase" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Qt InterBase plugin makes it possible to access the InterBase and Firebird databases. InterBase can either be used as a client/server or without a server in which case it operates on local files. The database file must exist before a connection can be established. Firebird must be used with a server configuration.</p>
<p>Note that InterBase requires you to specify the full path to the database file, no matter whether it is stored locally or on another server.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">setHostName</span><span class="p">(</span><span class="s2">&quot;MyServer&quot;</span><span class="p">);</span>
<span class="n">db</span><span class="o">.</span><span class="n">setDatabaseName</span><span class="p">(</span><span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">test.gdb&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>You need the InterBase/Firebird development headers and libraries to build this plugin.</p>
<p>Due to license incompatibilities with the GPL, users of the Qt Open Source Edition are not allowed to link this plugin to the commercial editions of InterBase. Please use Firebird or the free edition of InterBase.</p>
</div></blockquote>
</div>
<div class="section" id="qibase-unicode-support-and-text-encoding">
<span id="id48"></span><h2>QIBASE Unicode Support and Text Encoding<a class="headerlink" href="#qibase-unicode-support-and-text-encoding" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>By default the driver connects to the database using UNICODE_FSS. This can be overridden by setting the ISC_DPB_LC_CTYPE parameter with <code class="xref py py-func docutils literal"><span class="pre">QSqlDatabase.setConnectOptions()</span></code> before opening the connection.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">database</span> <span class="n">using</span> <span class="n">the</span> <span class="n">Latin</span><span class="o">-</span><span class="mi">1</span> <span class="n">character</span> <span class="nb">set</span>
<span class="n">db</span><span class="o">.</span><span class="n">setConnectOptions</span><span class="p">(</span><span class="s2">&quot;ISC_DPB_LC_CTYPE=Latin1&quot;</span><span class="p">);</span>
<span class="n">db</span><span class="o">.</span><span class="n">open</span><span class="p">();</span>
</pre></div>
</div>
<p>If Qt does not support the given text encoding the driver will issue a warning message and connect to the database using UNICODE_FSS.</p>
<p>Note that if the text encoding set when connecting to the database is not the same as in the database, problems with transliteration might arise.</p>
</div></blockquote>
</div>
<div class="section" id="qibase-stored-procedures">
<span id="id49"></span><h2>QIBASE Stored procedures<a class="headerlink" href="#qibase-stored-procedures" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>InterBase/Firebird return OUT values as result set, so when calling stored procedure, only IN values need to be bound via <code class="xref py py-func docutils literal"><span class="pre">QSqlQuery.bindValue()</span></code> . The RETURN/OUT values can be retrieved via <code class="xref py py-func docutils literal"><span class="pre">QSqlQuery.value()</span></code> . Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QSqlQuery</span> <span class="n">q</span><span class="p">;</span>
<span class="n">q</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;execute procedure my_procedure&quot;</span><span class="p">);</span>
<span class="n">q</span><span class="o">.</span><span class="n">next</span><span class="p">();</span>
<span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">q</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="o">//</span> <span class="n">outputs</span> <span class="n">the</span> <span class="n">first</span> <span class="n">RETURN</span><span class="o">/</span><span class="n">OUT</span> <span class="n">value</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qibase-plugin-on-unix-and-macos">
<span id="id50"></span><h2>How to Build the QIBASE Plugin on Unix and macOS<a class="headerlink" href="#how-to-build-the-qibase-plugin-on-unix-and-macos" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The following assumes InterBase or Firebird is installed in <code class="docutils literal"><span class="pre">/opt/interbase</span></code> :</p>
<p>If you are using InterBase:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- IBASE_PREFIX=/opt/interbase
make sub-ibase
</pre></div>
</div>
<p>If you are using Firebird, the Firebird library has to be set explicitly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>cd $QTDIR/qtbase/src/plugins/sqldrivers
qmake -- IBASE_PREFIX=/opt/interbase IBASE_LIBS=-lfbclient
make sub-ibase
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="how-to-build-the-qibase-plugin-on-windows">
<span id="id51"></span><h2>How to Build the QIBASE Plugin on Windows<a class="headerlink" href="#how-to-build-the-qibase-plugin-on-windows" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The following assumes InterBase or Firebird is installed in <code class="docutils literal"><span class="pre">C:\interbase</span></code> :</p>
<p>If you are using InterBase:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span> <span class="o">--</span> <span class="n">IBASE_INCDIR</span><span class="o">=</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">interbase</span><span class="o">/</span><span class="n">include</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">ibase</span>
</pre></div>
</div>
<p>If you are using Firebird, the Firebird library has to be set explicitly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">%</span><span class="n">QTDIR</span><span class="o">%</span>\<span class="n">qtbase</span>\<span class="n">src</span>\<span class="n">plugins</span>\<span class="n">sqldrivers</span>
<span class="n">qmake</span> <span class="o">--</span> <span class="n">IBASE_INCDIR</span><span class="o">=</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">interbase</span><span class="o">/</span><span class="n">include</span> <span class="n">IBASE_LIBS</span><span class="o">=-</span><span class="n">lfbclient</span>
<span class="n">nmake</span> <span class="n">sub</span><span class="o">-</span><span class="n">ibase</span>
</pre></div>
</div>
<p>If you are not using a Microsoft compiler, replace <code class="docutils literal"><span class="pre">nmake</span></code> with <code class="docutils literal"><span class="pre">mingw32-make</span></code> in the line above.</p>
<p>Note that <code class="docutils literal"><span class="pre">C:\interbase\bin</span></code> must be in the <code class="docutils literal"><span class="pre">PATH</span></code> .</p>
</div></blockquote>
</div>
<div class="section" id="id53">
<span id="id54"></span><h2>Troubleshooting<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>You should always use client libraries that have been compiled with the same compiler as you are using for your project. If you cannot get a source distibution to compile the client libraries yourself, you must make sure that the pre-compiled library is compatible with your compiler, otherwise you will get a lot of “undefined symbols” errors. Some compilers have tools to convert libraries, e.g. Borland ships the tool <code class="docutils literal"><span class="pre">COFF2OMF.EXE</span></code> to convert libraries that have been generated with Microsoft Visual C++.</p>
<p>If the compilation of a plugin succeeds but it cannot be loaded, make sure that the following requirements are met:</p>
<ul class="simple">
<li>Ensure that the plugin is in the correct directory. You can use <code class="xref py py-func docutils literal"><span class="pre">QApplication.libraryPaths()</span></code> to determine where Qt looks for plugins.</li>
<li>Ensure that the client libraries of the DBMS are available on the system. On Unix, run the command <code class="docutils literal"><span class="pre">ldd</span></code> and pass the name of the plugin as parameter, for example <code class="docutils literal"><span class="pre">ldd</span> <span class="pre">libqsqlmysql.so</span></code>. You will get a warning if any of the client libraries could not be found. On Windows, you can use Visual Studio’s dependency walker. With Qt Creator, you can update the <code class="docutils literal"><span class="pre">PATH</span></code> environment variable in the <strong>Run</strong> section of the <strong>Project</strong> panel to include the path to the folder containing the client libraries.</li>
<li>Compile Qt with <code class="docutils literal"><span class="pre">QT_DEBUG_COMPONENT</span></code> defined to get very verbose debug output when loading plugins.</li>
</ul>
<p>Make sure you have followed the guide to Deploying Plugins.</p>
</div></blockquote>
</div>
<div class="section" id="how-to-write-your-own-database-driver">
<span id="id55"></span><span id="id56"></span><h2>How to Write Your Own Database Driver<a class="headerlink" href="#how-to-write-your-own-database-driver" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference internal" href="../PySide2/QtSql/QSqlDatabase.html#PySide2.QtSql.QSqlDatabase" title="PySide2.QtSql.QSqlDatabase"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDatabase</span></code></a> is responsible for loading and managing database driver plugins. When a database is added (see <code class="xref py py-func docutils literal"><span class="pre">QSqlDatabase.addDatabase()</span></code> ), the appropriate driver plugin is loaded (using <code class="xref py py-class docutils literal"><span class="pre">QSqlDriverPlugin</span></code> ). <a class="reference internal" href="../PySide2/QtSql/QSqlDatabase.html#PySide2.QtSql.QSqlDatabase" title="PySide2.QtSql.QSqlDatabase"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDatabase</span></code></a> relies on the driver plugin to provide interfaces for <a class="reference internal" href="../PySide2/QtSql/QSqlDriver.html#PySide2.QtSql.QSqlDriver" title="PySide2.QtSql.QSqlDriver"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDriver</span></code></a> and <a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> .</p>
<p><a class="reference internal" href="../PySide2/QtSql/QSqlDriver.html#PySide2.QtSql.QSqlDriver" title="PySide2.QtSql.QSqlDriver"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDriver</span></code></a> is an abstract base class which defines the functionality of a SQL database driver. This includes functions such as <code class="xref py py-func docutils literal"><span class="pre">QSqlDriver.open()</span></code> and <code class="xref py py-func docutils literal"><span class="pre">QSqlDriver.close()</span></code> . <a class="reference internal" href="../PySide2/QtSql/QSqlDriver.html#PySide2.QtSql.QSqlDriver" title="PySide2.QtSql.QSqlDriver"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDriver</span></code></a> is responsible for connecting to a database, establish the proper environment, etc. In addition, <a class="reference internal" href="../PySide2/QtSql/QSqlDriver.html#PySide2.QtSql.QSqlDriver" title="PySide2.QtSql.QSqlDriver"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDriver</span></code></a> can create <a class="reference internal" href="../PySide2/QtSql/QSqlQuery.html#PySide2.QtSql.QSqlQuery" title="PySide2.QtSql.QSqlQuery"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlQuery</span></code></a> objects appropriate for the particular database API. <a class="reference internal" href="../PySide2/QtSql/QSqlDatabase.html#PySide2.QtSql.QSqlDatabase" title="PySide2.QtSql.QSqlDatabase"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDatabase</span></code></a> forwards many of its function calls directly to <a class="reference internal" href="../PySide2/QtSql/QSqlDriver.html#PySide2.QtSql.QSqlDriver" title="PySide2.QtSql.QSqlDriver"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDriver</span></code></a> which provides the concrete implementation.</p>
<p><a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> is an abstract base class which defines the functionality of a SQL database query. This includes statements such as <code class="docutils literal"><span class="pre">SELECT</span></code> , <code class="docutils literal"><span class="pre">UPDATE</span></code> , and <code class="docutils literal"><span class="pre">ALTER</span></code> <code class="docutils literal"><span class="pre">TABLE</span></code> . <a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> contains functions such as QSqlResult::next() and QSqlResult::value(). <a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> is responsible for sending queries to the database, returning result data, etc. <a class="reference internal" href="../PySide2/QtSql/QSqlQuery.html#PySide2.QtSql.QSqlQuery" title="PySide2.QtSql.QSqlQuery"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlQuery</span></code></a> forwards many of its function calls directly to <a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> which provides the concrete implementation.</p>
<p><a class="reference internal" href="../PySide2/QtSql/QSqlDriver.html#PySide2.QtSql.QSqlDriver" title="PySide2.QtSql.QSqlDriver"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlDriver</span></code></a> and <a class="reference internal" href="../PySide2/QtSql/QSqlResult.html#PySide2.QtSql.QSqlResult" title="PySide2.QtSql.QSqlResult"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtSql.QSqlResult</span></code></a> are closely connected. When implementing a Qt SQL driver, both of these classes must to be subclassed and the abstract virtual methods in each class must be implemented.</p>
<p>To implement a Qt SQL driver as a plugin (so that it is recognized and loaded by the Qt library at runtime), the driver must use the <code class="xref py py-func docutils literal"><span class="pre">Q_PLUGIN_METADATA()</span></code> macro. Read How to Create Qt Plugins for more information on this. You can also check out how this is done in the SQL plugins that are provided with Qt in <code class="docutils literal"><span class="pre">QTDIR/qtbase/src/plugins/sqldrivers</span></code> .</p>
<p>The following code can be used as a skeleton for a SQL driver:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">XyzResult</span><span class="p">(</span><span class="n">QSqlResult</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">driver</span><span class="p">):</span>
        <span class="n">QSqlResult</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">driver</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QVariant</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">isNull</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">fetchFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">fetchLast</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">numRowsAffected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">record</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QSqlRecord</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">XyzDriver</span><span class="p">(</span><span class="n">QSqlDriver</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">hasFeature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">createResult</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">XyzResult</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <p>© 2018 The Qt Company Ltd. Documentation contributions included herein are the copyrights of their respective owners. The documentation provided herein is licensed under the terms of the <a href="http://www.gnu.org/license/fdl.html">GNU Free Documentation License version 1.3</a> as published by the Free Software Foundation. Qt and respective logos are trademarks of The Qt Company Ltd. in Finland and/or other countries worldwide. All other trademarks are property of their respective owners.</p>
    </div></div>
    <div id="footer" class="footer">
    </div>
</div>
  </body>
</html>