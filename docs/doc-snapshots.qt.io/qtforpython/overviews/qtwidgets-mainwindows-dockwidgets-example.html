
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Dock Widgets Example &#8212; Qt for Python (Technology Preview)</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.11.0~a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
  <link rel="stylesheet" type="text/css" href="/style/pyside.css" />
  <link rel="icon" type="image/png" href="/style/pyside-32px.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/style/pyside-16px.png" sizes="16x16" />
  <script type="text/javascript"> wpThemeFolder = 'http://qt.io/wp-content/themes/oneqt'; </script>
  <script type="text/javascript" src="/scripts/main.js"></script>
  <script type="text/javascript" src="/scripts/extras.js"></script>
  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-54043535-2', 'qt.io');
    ga('set', 'forceSSL', true);
    ga('send', 'pageview');
  </script>

  </head>
  <body>
<div id="container">
    <div class="header">
        <div class="header_container">
            <header id="navbar">
            </header>
        </div>
    </div>
    <div class="main">
        <div class="main-rounded">
            <div class="navigationbar">
                <ul class="sub-navigation">
                    <li><a href="http://wiki.qt.io/">Wiki</a></li>
                    <li><a href="https://doc.qt.io/">Documentation</a></li>
                    <li><a href="http://forum.qt.io/">Forum</a></li>
                    <li><a href="https://bugreports.qt.io/">Bug Reports</a></li>
                    <li><a href="https://codereview.qt-project.org/">Code Review</a></li>
                </ul>
                <div id="main_title_bar"><h1>Qt Documentation</h1></div>
                <div class="related">
                    <ul>
                        <li><a href="../index.html">Qt for Python (Technology Preview)</a></li> 
                    </ul>
                </div>
            </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Dock Widgets Example</a><ul>
<li><a class="reference internal" href="#mainwindow-class-definition">MainWindow Class Definition</a></li>
<li><a class="reference internal" href="#mainwindow-class-implementation">MainWindow Class Implementation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mainwindow-cpp-example-file">mainwindow.cpp Example File</a></li>
<li><a class="reference internal" href="#mainwindow-h-example-file">mainwindow.h Example File</a></li>
<li><a class="reference internal" href="#main-cpp-example-file">main.cpp Example File</a></li>
<li><a class="reference internal" href="#dockwidgets-pro-example-file">dockwidgets.pro Example File</a></li>
<li><a class="reference internal" href="#dockwidgets-qrc-example-file">dockwidgets.qrc Example File</a></li>
<li><a class="reference internal" href="#new-png-image-file">new.png Image File</a></li>
<li><a class="reference internal" href="#print-png-image-file">print.png Image File</a></li>
<li><a class="reference internal" href="#save-png-image-file">save.png Image File</a></li>
<li><a class="reference internal" href="#undo-png-image-file">undo.png Image File</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" id="q" size="18" />
      <input type="submit" value="Go" id="search_button" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dock-widgets-example">
<span id="id1"></span><h1>Dock Widgets Example<a class="headerlink" href="#dock-widgets-example" title="Permalink to this headline">¶</a></h1>
<p>Dock Widgets example shows how to add dock windows to an application. It also shows how to use Qt’s rich text engine</p>
<blockquote>
<div><p>The Dock Widgets example shows how to add dock windows to an application. It also shows how to use Qt’s rich text engine.</p>
<p>The application presents a simple business letter template, and has a list of customer names and addresses and a list of standard phrases in two dock windows. The user can click a customer to have their name and address inserted into the template, and click one or more of the standard phrases. Errors can be corrected by clicking the Undo button. Once the letter has been prepared it can be printed or saved as HTML.</p>
</div></blockquote>
<div class="section" id="mainwindow-class-definition">
<span id="id2"></span><h2>MainWindow Class Definition<a class="headerlink" href="#mainwindow-class-definition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Here’s the class definition:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MainWindow</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QMainWindow</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>

<span class="n">public</span><span class="p">:</span>
    <span class="n">MainWindow</span><span class="p">();</span>

<span class="n">private</span> <span class="n">slots</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">newLetter</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">save</span><span class="p">();</span>
    <span class="n">void</span> <span class="nb">print</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">undo</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">about</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">insertCustomer</span><span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">customer</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">addParagraph</span><span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">paragraph</span><span class="p">);</span>

<span class="n">private</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">createActions</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">createStatusBar</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">createDockWindows</span><span class="p">();</span>

    <span class="n">QTextEdit</span> <span class="o">*</span><span class="n">textEdit</span><span class="p">;</span>
    <span class="n">QListWidget</span> <span class="o">*</span><span class="n">customerList</span><span class="p">;</span>
    <span class="n">QListWidget</span> <span class="o">*</span><span class="n">paragraphsList</span><span class="p">;</span>

    <span class="n">QMenu</span> <span class="o">*</span><span class="n">viewMenu</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>We will now review each function in turn.</p>
</div></blockquote>
</div>
<div class="section" id="mainwindow-class-implementation">
<span id="id3"></span><h2>MainWindow Class Implementation<a class="headerlink" href="#mainwindow-class-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PySide2.QtGui</span> <span class="k">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>We start by including <code class="docutils literal"><span class="pre">&lt;QtWidgets&gt;</span></code> , a header file that contains the definition of all classes in the Qt Core, Qt GUI and Qt Widgets modules. This saves us from having to include every class individually and is especially convenient if we add new widgets. We also include <code class="docutils literal"><span class="pre">mainwindow.h</span></code> .</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">textEdit</span> <span class="o">=</span>  <span class="n">QTextEdit</span><span class="p">()</span>
    <span class="n">setCentralWidget</span><span class="p">(</span><span class="n">textEdit</span><span class="p">)</span>

    <span class="n">createActions</span><span class="p">()</span>
    <span class="n">createMenus</span><span class="p">()</span>
    <span class="n">createToolBars</span><span class="p">()</span>
    <span class="n">createStatusBar</span><span class="p">()</span>
    <span class="n">createDockWindows</span><span class="p">()</span>

    <span class="n">setWindowTitle</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Dock Widgets&quot;</span><span class="p">))</span>

    <span class="n">Letter</span><span class="p">()</span>
    <span class="n">setUnifiedTitleAndToolBarOnMac</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In the constructor, we start by creating a <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> widget. Then we call <code class="xref py py-func docutils literal"><span class="pre">QMainWindow.setCentralWidget()</span></code> . This function passes ownership of the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> to the <code class="docutils literal"><span class="pre">MainWindow</span></code> and tells the <code class="docutils literal"><span class="pre">MainWindow</span></code> that the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> will occupy the <code class="docutils literal"><span class="pre">MainWindow</span></code> ‘s central area.</p>
<p>Then we call <code class="docutils literal"><span class="pre">createActions()</span></code> , <code class="docutils literal"><span class="pre">createMenus()</span></code> , <code class="docutils literal"><span class="pre">createToolBars()</span></code> , <code class="docutils literal"><span class="pre">createStatusBar()</span></code> , and <code class="docutils literal"><span class="pre">createDockWindows()</span></code> to set up the user interface. Finally we call <code class="docutils literal"><span class="pre">setWindowTitle()</span></code> to give the application a title, and <code class="docutils literal"><span class="pre">newLetter()</span></code> to create a new letter template.</p>
<p>We won’t quote the <code class="docutils literal"><span class="pre">createActions()</span></code> , <code class="docutils literal"><span class="pre">createMenus()</span></code> , <code class="docutils literal"><span class="pre">createToolBars()</span></code> , and <code class="docutils literal"><span class="pre">createStatusBar()</span></code> functions since they follow the same pattern as all the other Qt examples.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">createDockWindows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">dock</span> <span class="o">=</span>  <span class="n">QDockWidget</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Customers&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="n">dock</span><span class="o">.</span><span class="n">setAllowedAreas</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">LeftDockWidgetArea</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">.</span><span class="n">RightDockWidgetArea</span><span class="p">)</span>
    <span class="n">customerList</span> <span class="o">=</span>  <span class="n">QListWidget</span><span class="p">(</span><span class="n">dock</span><span class="p">)</span>
    <span class="n">customerList</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="n">QStringList</span><span class="p">()</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;John Doe, Harmony Enterprises, 12 Lakeside, Ambleton&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Jane Doe, Memorabilia, 23 Watersedge, Beaton&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Tammy Shea, Tiblanka, 38 Sea Views, Carlton&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Tim Sheen, Caraba Gifts, 48 Ocean Way, Deal&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Sol Harvey, Chicos Coffee, 53 New Springs, Eccleston&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Sally Hobart, Tiroli Tea, 67 Long River, Fedula&quot;</span><span class="p">)</span>
    <span class="n">dock</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="n">customerList</span><span class="p">)</span>
    <span class="n">addDockWidget</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">RightDockWidgetArea</span><span class="p">,</span> <span class="n">dock</span><span class="p">)</span>
    <span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">dock</span><span class="o">.</span><span class="n">toggleViewAction</span><span class="p">())</span>

    <span class="n">dock</span> <span class="o">=</span>  <span class="n">QDockWidget</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Paragraphs&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="n">paragraphsList</span> <span class="o">=</span>  <span class="n">QListWidget</span><span class="p">(</span><span class="n">dock</span><span class="p">)</span>
    <span class="n">paragraphsList</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="n">QStringList</span><span class="p">()</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Thank you for your payment which we have received today.&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Your order has been dispatched and should be with you &quot;</span>
               <span class="s2">&quot;within 28 days.&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;We have dispatched those items that were in stock. The &quot;</span>
               <span class="s2">&quot;rest of your order will be dispatched once all the &quot;</span>
               <span class="s2">&quot;remaining items have arrived at our warehouse. No &quot;</span>
               <span class="s2">&quot;additional shipping charges will be made.&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;You made a small overpayment (less than $5) which we &quot;</span>
               <span class="s2">&quot;will keep on account for you, or return at your request.&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;You made a small underpayment (less than $1), but we have &quot;</span>
               <span class="s2">&quot;sent your order anyway. We&#39;ll add self underpayment to &quot;</span>
               <span class="s2">&quot;your next bill.&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;Unfortunately you did not send enough money. Please remit &quot;</span>
               <span class="s2">&quot;an additional $. Your order will be dispatched as soon as &quot;</span>
               <span class="s2">&quot;the complete amount has been received.&quot;</span>
            <span class="o">&lt;&lt;</span> <span class="s2">&quot;You made an overpayment (more than $5). Do you wish to &quot;</span>
               <span class="s2">&quot;buy more items, or should we return the excess to you?&quot;</span><span class="p">)</span>
    <span class="n">dock</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="n">paragraphsList</span><span class="p">)</span>
    <span class="n">addDockWidget</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">RightDockWidgetArea</span><span class="p">,</span> <span class="n">dock</span><span class="p">)</span>
    <span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">dock</span><span class="o">.</span><span class="n">toggleViewAction</span><span class="p">())</span>

    <span class="n">connect</span><span class="p">(</span><span class="n">customerList</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;currentTextChanged(const QString &amp;)&quot;</span><span class="p">),</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s2">&quot;insertCustomer(const QString &amp;)&quot;</span><span class="p">))</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">paragraphsList</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;currentTextChanged(const QString &amp;)&quot;</span><span class="p">),</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s2">&quot;addParagraph(const QString &amp;)&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>We create the customers dock window first, and in addition to a window title, we also pass it a <code class="docutils literal"><span class="pre">this</span></code> pointer so that it becomes a child of <code class="docutils literal"><span class="pre">MainWindow</span></code> . Normally we don’t have to pass a parent because widgets are parented automatically when they are laid out: but dock windows aren’t laid out using layouts.</p>
<p>We’ve chosen to restrict the customers dock window to the left and right dock areas. (So the user cannot drag the dock window to the top or bottom dock areas.) The user can drag the dock window out of the dock areas entirely so that it becomes a free floating window. We can change this (and whether the dock window is moveable or closable) using <code class="xref py py-func docutils literal"><span class="pre">QDockWidget.setFeatures()</span></code> .</p>
<p>Once we’ve created the dock window we create a list widget with the dock window as parent, then we populate the list and make it the dock window’s widget. Finally we add the dock widget to the <code class="docutils literal"><span class="pre">MainWindow</span></code> using <code class="docutils literal"><span class="pre">addDockWidget()</span></code> , choosing to put it in the right dock area.</p>
<p>We undertake a similar process for the paragraphs dock window, except that we don’t restrict which dock areas it can be dragged to.</p>
<p>Finally we set up the signal-slot connections. If the user clicks a customer or a paragraph their <code class="docutils literal"><span class="pre">currentTextChanged()</span></code> signal will be emitted and we connect these to <code class="docutils literal"><span class="pre">insertCustomer()</span></code> and addParagraph() passing the text that was clicked.</p>
<p>We briefly discuss the rest of the implementation, but have now covered everything relating to dock windows.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Letter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">textEdit</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="n">cursor</span> <span class="o">=</span> <span class="n">QTextCursor</span><span class="p">(</span><span class="n">textEdit</span><span class="o">.</span><span class="n">textCursor</span><span class="p">())</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">movePosition</span><span class="p">(</span><span class="n">QTextCursor</span><span class="o">.</span><span class="n">Start</span><span class="p">)</span>
    <span class="n">topFrame</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">currentFrame</span><span class="p">()</span>
    <span class="n">topFrameFormat</span> <span class="o">=</span> <span class="n">topFrame</span><span class="o">.</span><span class="n">frameFormat</span><span class="p">()</span>
    <span class="n">topFrameFormat</span><span class="o">.</span><span class="n">setPadding</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">topFrame</span><span class="o">.</span><span class="n">setFrameFormat</span><span class="p">(</span><span class="n">topFrameFormat</span><span class="p">)</span>

    <span class="n">textFormat</span> <span class="o">=</span> <span class="n">QTextCharFormat</span><span class="p">()</span>
    <span class="n">boldFormat</span> <span class="o">=</span> <span class="n">QTextCharFormat</span><span class="p">()</span>
    <span class="n">boldFormat</span><span class="o">.</span><span class="n">setFontWeight</span><span class="p">(</span><span class="n">QFont</span><span class="o">.</span><span class="n">Bold</span><span class="p">)</span>
    <span class="n">italicFormat</span> <span class="o">=</span> <span class="n">QTextCharFormat</span><span class="p">()</span>
    <span class="n">italicFormat</span><span class="o">.</span><span class="n">setFontItalic</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">tableFormat</span> <span class="o">=</span> <span class="n">QTextTableFormat</span><span class="p">()</span>
    <span class="n">tableFormat</span><span class="o">.</span><span class="n">setBorder</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">tableFormat</span><span class="o">.</span><span class="n">setCellPadding</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">tableFormat</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertTable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tableFormat</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;The Firm&quot;</span><span class="p">,</span> <span class="n">boldFormat</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;321 City Street&quot;</span><span class="p">,</span> <span class="n">textFormat</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;Industry Park&quot;</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;Some Country&quot;</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">topFrame</span><span class="o">.</span><span class="n">lastPosition</span><span class="p">())</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="s2">&quot;d MMMM yyyy&quot;</span><span class="p">),</span> <span class="n">textFormat</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;Dear &quot;</span><span class="p">,</span> <span class="n">textFormat</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="n">italicFormat</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">textFormat</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Yours sincerely,&quot;</span><span class="p">),</span> <span class="n">textFormat</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;The Boss&quot;</span><span class="p">,</span> <span class="n">textFormat</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="s2">&quot;ADDRESS&quot;</span><span class="p">,</span> <span class="n">italicFormat</span><span class="p">)</span>
</pre></div>
</div>
<p>In this function we clear the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> so that it is empty. Next we create a <a class="reference internal" href="../PySide2/QtGui/QTextCursor.html#PySide2.QtGui.QTextCursor" title="PySide2.QtGui.QTextCursor"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QTextCursor</span></code></a> on the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> . We move the cursor to the start of the document and create and format a frame. We then create some character formats and a table format. We insert a table into the document and insert the company’s name and address into a table using the table and character formats we created earlier. Then we insert the skeleton of the letter including two markers <code class="docutils literal"><span class="pre">NAME</span></code> and <code class="docutils literal"><span class="pre">ADDRESS</span></code> . We will also use the <code class="docutils literal"><span class="pre">Yours</span> <span class="pre">sincerely,</span></code> text as a marker.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">insertCustomer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customer</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">customer</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">():</span>
        <span class="k">return</span>

    <span class="n">customerList</span> <span class="o">=</span> <span class="n">customer</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>
    <span class="n">document</span> <span class="o">=</span> <span class="n">textEdit</span><span class="o">.</span><span class="n">document</span><span class="p">()</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cursor</span><span class="o">.</span><span class="n">isNull</span><span class="p">():</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">beginEditBlock</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="n">customerList</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">oldcursor</span> <span class="o">=</span> <span class="n">cursor</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;ADDRESS&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cursor</span><span class="o">.</span><span class="n">isNull</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">customerList</span><span class="o">.</span><span class="n">size</span><span class="p">()):</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="n">customerList</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

            <span class="n">cursor</span><span class="o">.</span><span class="n">endEditBlock</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">oldcursor</span><span class="o">.</span><span class="n">endEditBlock</span><span class="p">()</span>
</pre></div>
</div>
<p>If the user clicks a customer we split the customer details into pieces. We then look for the <code class="docutils literal"><span class="pre">NAME</span></code> marker using the <code class="docutils literal"><span class="pre">find()</span></code> function. This function selects the text it finds, so when we call <code class="docutils literal"><span class="pre">insertText()</span></code> with the customer’s name the name replaces the marker. We then look for the <code class="docutils literal"><span class="pre">ADDRESS</span></code> marker and replace it with each line of the customer’s address. Notice that we wrapped all the insertions between a <code class="docutils literal"><span class="pre">beginEditBlock()</span></code> and <code class="docutils literal"><span class="pre">endEditBlock()</span></code> pair. This means that the entire name and address insertion is treated as a single operation by the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> , so a single undo will revert all the insertions.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">addParagraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paragraph</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">paragraph</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">())</span>
        <span class="k">return</span>

    <span class="n">document</span> <span class="o">=</span> <span class="n">textEdit</span><span class="o">.</span><span class="n">document</span><span class="p">()</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Yours sincerely,&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">cursor</span><span class="o">.</span><span class="n">isNull</span><span class="p">():</span>
        <span class="k">return</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">beginEditBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">movePosition</span><span class="p">(</span><span class="n">QTextCursor</span><span class="o">.</span><span class="n">PreviousBlock</span><span class="p">,</span> <span class="n">QTextCursor</span><span class="o">.</span><span class="n">MoveAnchor</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="n">paragraph</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">insertBlock</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">endEditBlock</span><span class="p">()</span>
</pre></div>
</div>
<p>This function works in a similar way to <code class="docutils literal"><span class="pre">insertCustomer()</span></code> . First we look for the marker, in this case, <code class="docutils literal"><span class="pre">Yours</span> <span class="pre">sincerely,</span></code> , and then replace it with the standard paragraph that the user clicked. Again we use a <code class="docutils literal"><span class="pre">beginEditBlock()</span></code> … <code class="docutils literal"><span class="pre">endEditBlock()</span></code> pair so that the insertion can be undone as a single operation.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">document</span> <span class="o">=</span> <span class="n">textEdit</span><span class="o">.</span><span class="n">document</span><span class="p">()</span>
    <span class="n">printer</span> <span class="o">=</span> <span class="n">QPrinter</span><span class="p">()</span>

    <span class="n">dlg</span> <span class="o">=</span>  <span class="n">QPrintDialog</span><span class="p">(</span><span class="o">&amp;</span><span class="n">printer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span> <span class="o">!=</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">document</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">printer</span><span class="p">)</span>
    <span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Ready&quot;</span><span class="p">),</span> <span class="mi">2000</span><span class="p">)</span>
</pre></div>
</div>
<p>Qt’s <a class="reference internal" href="../PySide2/QtGui/QTextDocument.html#PySide2.QtGui.QTextDocument" title="PySide2.QtGui.QTextDocument"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QTextDocument</span></code></a> class makes printing documents easy. We simply take the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> ‘s <a class="reference internal" href="../PySide2/QtGui/QTextDocument.html#PySide2.QtGui.QTextDocument" title="PySide2.QtGui.QTextDocument"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QTextDocument</span></code></a> , set up the printer and print the document.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>def save(self):
    fileName = QFileDialog.getSaveFileName(self,
                        tr(&quot;Choose a file name&quot;), &quot;.&quot;,
                        tr(&quot;HTML (*.html *.htm)&quot;))
    if fileName.isEmpty():
        return
    file = QFile(fileName)
    if !file.open(QFile.WriteOnly | QFile::Text):
        QMessageBox.warning(self, tr(&quot;Dock Widgets&quot;),
                             tr(&quot;Cannot write file %1:\n%2.&quot;)
                             .arg(fileName)
                             .arg(file.errorString()))
        return


    out = QTextStream(file)
    QApplication.setOverrideCursor(Qt::WaitCursor)
    out &lt;&lt; textEdit.toHtml()
    QApplication.restoreOverrideCursor()

    statusBar().showMessage(tr(&quot;Saved &#39;%1&#39;&quot;).arg(fileName), 2000)
</pre></div>
</div>
<p><a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> can output its contents in HTML format, so we prompt the user for the name of an HTML file and if they provide one we simply write the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> ‘s contents in HTML format to the file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">undo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">document</span> <span class="o">=</span> <span class="n">textEdit</span><span class="o">.</span><span class="n">document</span><span class="p">()</span>
    <span class="n">document</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
</pre></div>
</div>
<p>If the focus is in the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> , pressing Ctrl+Z undoes as expected. But for the user’s convenience we provide an application-wide undo function that simply calls the <a class="reference internal" href="../PySide2/QtWidgets/QTextEdit.html#PySide2.QtWidgets.QTextEdit" title="PySide2.QtWidgets.QTextEdit"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTextEdit</span></code></a> ‘s undo: this means that the user can undo regardless of where the focus is in the application.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="mainwindow-cpp-example-file">
<h1>mainwindow.cpp Example File<a class="headerlink" href="#mainwindow-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="mainwindow-h-example-file">
<h1>mainwindow.h Example File<a class="headerlink" href="#mainwindow-h-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="main-cpp-example-file">
<h1>main.cpp Example File<a class="headerlink" href="#main-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="dockwidgets-pro-example-file">
<h1>dockwidgets.pro Example File<a class="headerlink" href="#dockwidgets-pro-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="dockwidgets-qrc-example-file">
<h1>dockwidgets.qrc Example File<a class="headerlink" href="#dockwidgets-qrc-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="new-png-image-file">
<h1>new.png Image File<a class="headerlink" href="#new-png-image-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="print-png-image-file">
<h1>print.png Image File<a class="headerlink" href="#print-png-image-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="save-png-image-file">
<h1>save.png Image File<a class="headerlink" href="#save-png-image-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="undo-png-image-file">
<h1>undo.png Image File<a class="headerlink" href="#undo-png-image-file" title="Permalink to this headline">¶</a></h1>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <p>© 2018 The Qt Company Ltd. Documentation contributions included herein are the copyrights of their respective owners. The documentation provided herein is licensed under the terms of the <a href="http://www.gnu.org/license/fdl.html">GNU Free Documentation License version 1.3</a> as published by the Free Software Foundation. Qt and respective logos are trademarks of The Qt Company Ltd. in Finland and/or other countries worldwide. All other trademarks are property of their respective owners.</p>
    </div></div>
    <div id="footer" class="footer">
    </div>
</div>
  </body>
</html>