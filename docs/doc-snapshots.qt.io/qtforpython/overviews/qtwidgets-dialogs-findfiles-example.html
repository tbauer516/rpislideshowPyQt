
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Find Files Example &#8212; Qt for Python (Technology Preview)</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.11.0~a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
  <link rel="stylesheet" type="text/css" href="/style/pyside.css" />
  <link rel="icon" type="image/png" href="/style/pyside-32px.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/style/pyside-16px.png" sizes="16x16" />
  <script type="text/javascript"> wpThemeFolder = 'http://qt.io/wp-content/themes/oneqt'; </script>
  <script type="text/javascript" src="/scripts/main.js"></script>
  <script type="text/javascript" src="/scripts/extras.js"></script>
  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-54043535-2', 'qt.io');
    ga('set', 'forceSSL', true);
    ga('send', 'pageview');
  </script>

  </head>
  <body>
<div id="container">
    <div class="header">
        <div class="header_container">
            <header id="navbar">
            </header>
        </div>
    </div>
    <div class="main">
        <div class="main-rounded">
            <div class="navigationbar">
                <ul class="sub-navigation">
                    <li><a href="http://wiki.qt.io/">Wiki</a></li>
                    <li><a href="https://doc.qt.io/">Documentation</a></li>
                    <li><a href="http://forum.qt.io/">Forum</a></li>
                    <li><a href="https://bugreports.qt.io/">Bug Reports</a></li>
                    <li><a href="https://codereview.qt-project.org/">Code Review</a></li>
                </ul>
                <div id="main_title_bar"><h1>Qt Documentation</h1></div>
                <div class="related">
                    <ul>
                        <li><a href="../index.html">Qt for Python (Technology Preview)</a></li> 
                    </ul>
                </div>
            </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Find Files Example</a><ul>
<li><a class="reference internal" href="#window-class-definition">Window Class Definition</a></li>
<li><a class="reference internal" href="#window-class-implementation">Window Class Implementation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#window-cpp-example-file">window.cpp Example File</a></li>
<li><a class="reference internal" href="#window-h-example-file">window.h Example File</a></li>
<li><a class="reference internal" href="#main-cpp-example-file">main.cpp Example File</a></li>
<li><a class="reference internal" href="#findfiles-pro-example-file">findfiles.pro Example File</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" id="q" size="18" />
      <input type="submit" value="Go" id="search_button" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="find-files-example">
<span id="id1"></span><h1>Find Files Example<a class="headerlink" href="#find-files-example" title="Permalink to this headline">¶</a></h1>
<p>A dialog for finding files in a specified folder</p>
<blockquote>
<div><p>A dialog for finding files in a specified folder</p>
<p>The Find Files application allows the user to search for files in a specified directory, matching a given file name or wildcard, and containing a specified string (if filled in). The search result is displayed in a table containing the names of the files and their sizes. The application also shows the number of files found.</p>
<p>The Find Files example illustrates the use of several classes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../PySide2/QtWidgets/QProgressDialog.html#PySide2.QtWidgets.QProgressDialog" title="PySide2.QtWidgets.QProgressDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QProgressDialog</span></code></a></td>
<td>Provide feedback on the progress of a search operation</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../PySide2/QtWidgets/QFileDialog.html#PySide2.QtWidgets.QFileDialog" title="PySide2.QtWidgets.QFileDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QFileDialog</span></code></a></td>
<td>Browse through a file list</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../PySide2/QtCore/QTextStream.html#PySide2.QtCore.QTextStream" title="PySide2.QtCore.QTextStream"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QTextStream</span></code></a></td>
<td>Use stream operators to read a file</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../PySide2/QtWidgets/QTableWidget.html#PySide2.QtWidgets.QTableWidget" title="PySide2.QtWidgets.QTableWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTableWidget</span></code></a></td>
<td>Browse through the search results in a table</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../PySide2/QtGui/QDesktopServices.html#PySide2.QtGui.QDesktopServices" title="PySide2.QtGui.QDesktopServices"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QDesktopServices</span></code></a></td>
<td>Open files in the result list in a suitable application</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="window-class-definition">
<span id="id2"></span><h2>Window Class Definition<a class="headerlink" href="#window-class-definition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The <code class="docutils literal"><span class="pre">Window</span></code> class inherits <a class="reference internal" href="../PySide2/QtWidgets/QWidget.html#PySide2.QtWidgets.QWidget" title="PySide2.QtWidgets.QWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QWidget</span></code></a> , and is the main application widget. It shows the search options and displays the search results.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Window</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QWidget</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>

<span class="n">public</span><span class="p">:</span>
    <span class="n">Window</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>

<span class="n">private</span> <span class="n">slots</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">browse</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">find</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">animateFindClick</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">openFileOfItem</span><span class="p">(</span><span class="nb">int</span> <span class="n">row</span><span class="p">,</span> <span class="nb">int</span> <span class="n">column</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">contextMenu</span><span class="p">(</span><span class="n">const</span> <span class="n">QPoint</span> <span class="o">&amp;</span><span class="n">pos</span><span class="p">);</span>

<span class="n">private</span><span class="p">:</span>
    <span class="n">QStringList</span> <span class="n">findFiles</span><span class="p">(</span><span class="n">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">files</span><span class="p">,</span> <span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">showFiles</span><span class="p">(</span><span class="n">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">paths</span><span class="p">);</span>
    <span class="n">QComboBox</span> <span class="o">*</span><span class="n">createComboBox</span><span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span> <span class="o">=</span> <span class="n">QString</span><span class="p">());</span>
    <span class="n">void</span> <span class="n">createFilesTable</span><span class="p">();</span>

    <span class="n">QComboBox</span> <span class="o">*</span><span class="n">fileComboBox</span><span class="p">;</span>
    <span class="n">QComboBox</span> <span class="o">*</span><span class="n">textComboBox</span><span class="p">;</span>
    <span class="n">QComboBox</span> <span class="o">*</span><span class="n">directoryComboBox</span><span class="p">;</span>
    <span class="n">QLabel</span> <span class="o">*</span><span class="n">filesFoundLabel</span><span class="p">;</span>
    <span class="n">QPushButton</span> <span class="o">*</span><span class="n">findButton</span><span class="p">;</span>
    <span class="n">QTableWidget</span> <span class="o">*</span><span class="n">filesTable</span><span class="p">;</span>

    <span class="n">QDir</span> <span class="n">currentDir</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The application has two private slots:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>The <code class="docutils literal"><span class="pre">browse()</span></code> slot</td>
<td>Called whenever the user wants to browse for a directory to search in</td>
</tr>
<tr class="row-even"><td>The <code class="docutils literal"><span class="pre">find()</span></code> slot</td>
<td>Called whenever the user launches a search with the Find button</td>
</tr>
</tbody>
</table>
<p>In addition we declare several private functions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>findFiles()</td>
<td>Search for files matching the search parameters</td>
</tr>
<tr class="row-even"><td>showFiles()</td>
<td>Display the search result</td>
</tr>
<tr class="row-odd"><td>ceateButton()</td>
<td>Construct the widget</td>
</tr>
<tr class="row-even"><td>createComboBox()</td>
<td>Construct the widget</td>
</tr>
<tr class="row-odd"><td>createFilesTable()</td>
<td>Construct the widget</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="window-class-implementation">
<span id="id3"></span><h2>Window Class Implementation<a class="headerlink" href="#window-class-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>In the constructor we first create the application’s widgets.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Window</span><span class="p">::</span><span class="n">Window</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
    <span class="p">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">setWindowTitle</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Find Files&quot;</span><span class="p">));</span>
    <span class="n">QPushButton</span> <span class="o">*</span><span class="n">browseButton</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;&amp;Browse...&quot;</span><span class="p">),</span> <span class="n">this</span><span class="p">);</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">browseButton</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">QAbstractButton</span><span class="p">::</span><span class="n">clicked</span><span class="p">,</span> <span class="n">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Window</span><span class="p">::</span><span class="n">browse</span><span class="p">);</span>
    <span class="n">findButton</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;&amp;Find&quot;</span><span class="p">),</span> <span class="n">this</span><span class="p">);</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">findButton</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">QAbstractButton</span><span class="p">::</span><span class="n">clicked</span><span class="p">,</span> <span class="n">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Window</span><span class="p">::</span><span class="n">find</span><span class="p">);</span>

    <span class="n">fileComboBox</span> <span class="o">=</span> <span class="n">createComboBox</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">));</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">fileComboBox</span><span class="o">-&gt;</span><span class="n">lineEdit</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">QLineEdit</span><span class="p">::</span><span class="n">returnPressed</span><span class="p">,</span>
            <span class="n">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Window</span><span class="p">::</span><span class="n">animateFindClick</span><span class="p">);</span>
    <span class="n">textComboBox</span> <span class="o">=</span> <span class="n">createComboBox</span><span class="p">();</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">textComboBox</span><span class="o">-&gt;</span><span class="n">lineEdit</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">QLineEdit</span><span class="p">::</span><span class="n">returnPressed</span><span class="p">,</span>
            <span class="n">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Window</span><span class="p">::</span><span class="n">animateFindClick</span><span class="p">);</span>
    <span class="n">directoryComboBox</span> <span class="o">=</span> <span class="n">createComboBox</span><span class="p">(</span><span class="n">QDir</span><span class="p">::</span><span class="n">toNativeSeparators</span><span class="p">(</span><span class="n">QDir</span><span class="p">::</span><span class="n">currentPath</span><span class="p">()));</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">directoryComboBox</span><span class="o">-&gt;</span><span class="n">lineEdit</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">QLineEdit</span><span class="p">::</span><span class="n">returnPressed</span><span class="p">,</span>
            <span class="n">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Window</span><span class="p">::</span><span class="n">animateFindClick</span><span class="p">);</span>

    <span class="n">filesFoundLabel</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QLabel</span><span class="p">;</span>

    <span class="n">createFilesTable</span><span class="p">();</span>

    <span class="n">QGridLayout</span> <span class="o">*</span><span class="n">mainLayout</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QGridLayout</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">new</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Named:&quot;</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">fileComboBox</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">new</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Containing text:&quot;</span><span class="p">)),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">textComboBox</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">new</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;In directory:&quot;</span><span class="p">)),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">directoryComboBox</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">browseButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">filesTable</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">filesFoundLabel</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">mainLayout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">findButton</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
<p>We create the widgets to build up the UI, and we add them to a main layout using <a class="reference internal" href="../PySide2/QtWidgets/QGridLayout.html#PySide2.QtWidgets.QGridLayout" title="PySide2.QtWidgets.QGridLayout"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QGridLayout</span></code></a> . We have, however, put the <code class="docutils literal"><span class="pre">Find</span></code> and <code class="docutils literal"><span class="pre">Quit</span></code> buttons and a stretchable space in a separate <a class="reference internal" href="../PySide2/QtWidgets/QHBoxLayout.html#PySide2.QtWidgets.QHBoxLayout" title="PySide2.QtWidgets.QHBoxLayout"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QHBoxLayout</span></code></a> first, to make the buttons appear in the <code class="docutils literal"><span class="pre">Window</span></code> widget’s bottom right corner.</p>
<p>Alternatively, we could have used Qt Designer to construct a UI file, and uic to generate this code.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">connect</span><span class="p">(</span><span class="n">new</span> <span class="n">QShortcut</span><span class="p">(</span><span class="n">QKeySequence</span><span class="p">::</span><span class="n">Quit</span><span class="p">,</span> <span class="n">this</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">QShortcut</span><span class="p">::</span><span class="n">activated</span><span class="p">,</span>
    <span class="n">qApp</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">QApplication</span><span class="p">::</span><span class="n">quit</span><span class="p">);</span>
</pre></div>
</div>
<p>We did not create a <a class="reference internal" href="../PySide2/QtWidgets/QMenuBar.html#PySide2.QtWidgets.QMenuBar" title="PySide2.QtWidgets.QMenuBar"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QMenuBar</span></code></a> with a Quit menu item; but we would still like to have a keyboard shortcut for quitting. Since we construct a <a class="reference internal" href="../PySide2/QtWidgets/QShortcut.html#PySide2.QtWidgets.QShortcut" title="PySide2.QtWidgets.QShortcut"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QShortcut</span></code></a> with <code class="xref py py-attr docutils literal"><span class="pre">QKeySequence.Quit</span></code> , and connect it to <code class="xref py py-func docutils literal"><span class="pre">QApplication.quit()</span></code> , on most platforms it will be possible to press Control-Q to quit (or whichever standard Quit key is configured on that platform). (On <span class="xref std std-ref">macOS</span> , this is redundant, because every application gets a Quit menu item automatically; but it helps to make the application portable.)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>void Window::browse()
{
    QString directory =
        QDir::toNativeSeparators(QFileDialog::getExistingDirectory(this, tr(&quot;Find Files&quot;), QDir::currentPath()));

    if (!directory.isEmpty()) {
        if (directoryComboBox-&gt;findText(directory) == -1)
            directoryComboBox-&gt;addItem(directory);
        directoryComboBox-&gt;setCurrentIndex(directoryComboBox-&gt;findText(directory));
    }
}
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">browse()</span></code> slot presents a file dialog to the user, using the <a class="reference internal" href="../PySide2/QtWidgets/QFileDialog.html#PySide2.QtWidgets.QFileDialog" title="PySide2.QtWidgets.QFileDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QFileDialog</span></code></a> class. <a class="reference internal" href="../PySide2/QtWidgets/QFileDialog.html#PySide2.QtWidgets.QFileDialog" title="PySide2.QtWidgets.QFileDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QFileDialog</span></code></a> enables a user to traverse the file system in order to select one or many files or a directory. The easiest way to create a <a class="reference internal" href="../PySide2/QtWidgets/QFileDialog.html#PySide2.QtWidgets.QFileDialog" title="PySide2.QtWidgets.QFileDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QFileDialog</span></code></a> is to use the convenience static functions.</p>
<p>Here we use the static <code class="xref py py-func docutils literal"><span class="pre">QFileDialog.getExistingDirectory()</span></code> function which returns an existing directory selected by the user. Then we display the directory in the directory combobox using the <code class="xref py py-func docutils literal"><span class="pre">QComboBox.addItem()</span></code> function and update the current index.</p>
<p><code class="xref py py-func docutils literal"><span class="pre">QComboBox.addItem()</span></code> adds an item to the combobox with the given text (if not already present in the list), and containing the specified userData. The item is appended to the list of existing items.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Window</span><span class="p">::</span><span class="n">find</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">QString</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">fileComboBox</span><span class="o">-&gt;</span><span class="n">currentText</span><span class="p">();</span>
    <span class="n">QString</span> <span class="n">text</span> <span class="o">=</span> <span class="n">textComboBox</span><span class="o">-&gt;</span><span class="n">currentText</span><span class="p">();</span>
    <span class="n">QString</span> <span class="n">path</span> <span class="o">=</span> <span class="n">QDir</span><span class="p">::</span><span class="n">cleanPath</span><span class="p">(</span><span class="n">directoryComboBox</span><span class="o">-&gt;</span><span class="n">currentText</span><span class="p">());</span>
    <span class="n">currentDir</span> <span class="o">=</span> <span class="n">QDir</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">find()</span></code> slot is called whenever the user requests a new search by pressing the Find button.</p>
<p>First we eliminate any previous search results by setting the table widgets row count to zero. Then we retrieve the specified file name, text, and directory path from the respective comboboxes.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    QStringList filter;
    if (!fileName.isEmpty())
        filter &lt;&lt; fileName;
    QDirIterator it(path, filter, QDir::AllEntries | QDir::NoSymLinks | QDir::NoDotAndDotDot, QDirIterator::Subdirectories);
    QStringList files;
    while (it.hasNext())
        files &lt;&lt; it.next();
    if (!text.isEmpty())
        files = findFiles(files, text);
    files.sort();
    showFiles(files);
}
</pre></div>
</div>
<p>We use the directory’s path to create a <a class="reference internal" href="../PySide2/QtCore/QDir.html#PySide2.QtCore.QDir" title="PySide2.QtCore.QDir"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QDir</span></code></a> ; the <a class="reference internal" href="../PySide2/QtCore/QDir.html#PySide2.QtCore.QDir" title="PySide2.QtCore.QDir"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QDir</span></code></a> class provides access to the directory structure and its contents.</p>
<p>We use <a class="reference internal" href="../PySide2/QtCore/QDirIterator.html#PySide2.QtCore.QDirIterator" title="PySide2.QtCore.QDirIterator"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QDirIterator</span></code></a> to iterate over the files that match the specified file name and build a <code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QStringList</span></code> of paths.</p>
<p>Then we search through all the files in the list, using the private <code class="docutils literal"><span class="pre">findFiles()</span></code> function, eliminating the ones that don’t contain the specified text. We sort them (because <a class="reference internal" href="../PySide2/QtCore/QDirIterator.html#PySide2.QtCore.QDirIterator" title="PySide2.QtCore.QDirIterator"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QDirIterator</span></code></a> did not). And finally, we display the results using the private <code class="docutils literal"><span class="pre">showFiles()</span></code> function.</p>
<p>If the user didn’t specify any text, there is no reason to search through the files, so we sort and display the results immediately.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QStringList</span> <span class="n">Window</span><span class="p">::</span><span class="n">findFiles</span><span class="p">(</span><span class="n">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">files</span><span class="p">,</span> <span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QProgressDialog</span> <span class="n">progressDialog</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
    <span class="n">progressDialog</span><span class="o">.</span><span class="n">setCancelButtonText</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;&amp;Cancel&quot;</span><span class="p">));</span>
    <span class="n">progressDialog</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">size</span><span class="p">());</span>
    <span class="n">progressDialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Find Files&quot;</span><span class="p">));</span>
</pre></div>
</div>
<p>In the private <code class="docutils literal"><span class="pre">findFiles()</span></code> function we search through a list of files, looking for the ones that contain a specified text. This can be a very slow operation depending on the number of files as well as their sizes. <a class="reference internal" href="../PySide2/QtWidgets/QProgressDialog.html#PySide2.QtWidgets.QProgressDialog" title="PySide2.QtWidgets.QProgressDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QProgressDialog</span></code></a> displays a progress dialog if the application has to search through a large number of files, or if some of the files have a large size. <a class="reference internal" href="../PySide2/QtWidgets/QProgressDialog.html#PySide2.QtWidgets.QProgressDialog" title="PySide2.QtWidgets.QProgressDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QProgressDialog</span></code></a> can also allow the user to abort the operation if it takes too much time.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QMimeDatabase</span> <span class="n">mimeDatabase</span><span class="p">;</span>
<span class="n">QStringList</span> <span class="n">foundFiles</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">files</span><span class="o">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">progressDialog</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="n">progressDialog</span><span class="o">.</span><span class="n">setLabelText</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Searching file number %1 of %n...&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">files</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">arg</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
    <span class="n">QCoreApplication</span><span class="p">::</span><span class="n">processEvents</span><span class="p">();</span>
</pre></div>
</div>
<p>We run through the files, one at a time, and for each file we update the <a class="reference internal" href="../PySide2/QtWidgets/QProgressDialog.html#PySide2.QtWidgets.QProgressDialog" title="PySide2.QtWidgets.QProgressDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QProgressDialog</span></code></a> value. This property holds the current amount of progress made. We also update the progress dialog’s label.</p>
<p>Then we call the <code class="xref py py-func docutils literal"><span class="pre">QCoreApplication.processEvents()</span></code> function using the <a class="reference internal" href="../PySide2/QtWidgets/QApplication.html#PySide2.QtWidgets.QApplication" title="PySide2.QtWidgets.QApplication"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QApplication</span></code></a> object. In this way we interleave the display of the progress made with the process of searching through the files so the application doesn’t appear to be frozen.</p>
<p>The <a class="reference internal" href="../PySide2/QtWidgets/QApplication.html#PySide2.QtWidgets.QApplication" title="PySide2.QtWidgets.QApplication"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QApplication</span></code></a> class manages the GUI application’s control flow and main settings. It contains the main event loop, where all events from the window system and other sources are processed and dispatched. <a class="reference internal" href="../PySide2/QtWidgets/QApplication.html#PySide2.QtWidgets.QApplication" title="PySide2.QtWidgets.QApplication"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QApplication</span></code></a> inherits <a class="reference internal" href="../PySide2/QtCore/QCoreApplication.html#PySide2.QtCore.QCoreApplication" title="PySide2.QtCore.QCoreApplication"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QCoreApplication</span></code></a> . The <code class="xref py py-func docutils literal"><span class="pre">QCoreApplication.processEvents()</span></code> function processes all pending events according to the specified QEventLoop::ProcessEventFlags until there are no more events to process. The default flags are <code class="xref py py-attr docutils literal"><span class="pre">QEventLoop.AllEvents</span></code> .</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>        const QString fileName = files.at(i);
        const QMimeType mimeType = mimeDatabase.mimeTypeForFile(fileName);
        if (mimeType.isValid() &amp;&amp; !mimeType.inherits(QStringLiteral(&quot;text/plain&quot;))) {
            qWarning() &lt;&lt; &quot;Not searching binary file &quot; &lt;&lt; QDir::toNativeSeparators(fileName);
            continue;
        }
        QFile file(fileName);
        if (file.open(QIODevice::ReadOnly)) {
            QString line;
            QTextStream in(&amp;file);
            while (!in.atEnd()) {
                if (progressDialog.wasCanceled())
                    break;
                line = in.readLine();
                if (line.contains(text, Qt::CaseInsensitive)) {
                    foundFiles &lt;&lt; files[i];
                    break;
                }
            }
        }
    }
    return foundFiles;
}
</pre></div>
</div>
<p>After updating the <a class="reference internal" href="../PySide2/QtWidgets/QProgressDialog.html#PySide2.QtWidgets.QProgressDialog" title="PySide2.QtWidgets.QProgressDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QProgressDialog</span></code></a> , we open the file in read-only mode, and read one line at a time using <a class="reference internal" href="../PySide2/QtCore/QTextStream.html#PySide2.QtCore.QTextStream" title="PySide2.QtCore.QTextStream"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QTextStream</span></code></a> .</p>
<p>The <a class="reference internal" href="../PySide2/QtCore/QTextStream.html#PySide2.QtCore.QTextStream" title="PySide2.QtCore.QTextStream"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QTextStream</span></code></a> class provides a convenient interface for reading and writing text. Using <a class="reference internal" href="../PySide2/QtCore/QTextStream.html#PySide2.QtCore.QTextStream" title="PySide2.QtCore.QTextStream"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QTextStream</span></code></a> ‘s streaming operators, you can conveniently read and write words, lines and numbers.</p>
<p>For each line we read we check if the <a class="reference internal" href="../PySide2/QtWidgets/QProgressDialog.html#PySide2.QtWidgets.QProgressDialog" title="PySide2.QtWidgets.QProgressDialog"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QProgressDialog</span></code></a> has been canceled. If it has, we abort the operation, otherwise we check if the line contains the specified text. When we find the text within one of the files, we add the file’s name to a list of found files that contain the specified text, and start searching a new file.</p>
<p>Finally, we return the list of the files found.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Window</span><span class="p">::</span><span class="n">showFiles</span><span class="p">(</span><span class="n">const</span> <span class="n">QStringList</span> <span class="o">&amp;</span><span class="n">paths</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">filePath</span> <span class="p">:</span> <span class="n">paths</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">const</span> <span class="n">QString</span> <span class="n">toolTip</span> <span class="o">=</span> <span class="n">QDir</span><span class="p">::</span><span class="n">toNativeSeparators</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
        <span class="n">const</span> <span class="n">QString</span> <span class="n">relativePath</span> <span class="o">=</span> <span class="n">QDir</span><span class="p">::</span><span class="n">toNativeSeparators</span><span class="p">(</span><span class="n">currentDir</span><span class="o">.</span><span class="n">relativeFilePath</span><span class="p">(</span><span class="n">filePath</span><span class="p">));</span>
        <span class="n">const</span> <span class="n">qint64</span> <span class="n">size</span> <span class="o">=</span> <span class="n">QFileInfo</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">fileNameItem</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">relativePath</span><span class="p">);</span>
        <span class="n">fileNameItem</span><span class="o">-&gt;</span><span class="n">setData</span><span class="p">(</span><span class="n">absoluteFileNameRole</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">(</span><span class="n">filePath</span><span class="p">));</span>
        <span class="n">fileNameItem</span><span class="o">-&gt;</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">toolTip</span><span class="p">);</span>
        <span class="n">fileNameItem</span><span class="o">-&gt;</span><span class="n">setFlags</span><span class="p">(</span><span class="n">fileNameItem</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">Qt</span><span class="p">::</span><span class="n">ItemIsEditable</span><span class="p">);</span>
        <span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">sizeItem</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">QLocale</span><span class="p">()</span><span class="o">.</span><span class="n">formattedDataSize</span><span class="p">(</span><span class="n">size</span><span class="p">));</span>
        <span class="n">sizeItem</span><span class="o">-&gt;</span><span class="n">setData</span><span class="p">(</span><span class="n">absoluteFileNameRole</span><span class="p">,</span> <span class="n">QVariant</span><span class="p">(</span><span class="n">filePath</span><span class="p">));</span>
        <span class="n">sizeItem</span><span class="o">-&gt;</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">toolTip</span><span class="p">);</span>
        <span class="n">sizeItem</span><span class="o">-&gt;</span><span class="n">setTextAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="p">::</span><span class="n">AlignVCenter</span><span class="p">);</span>
        <span class="n">sizeItem</span><span class="o">-&gt;</span><span class="n">setFlags</span><span class="p">(</span><span class="n">sizeItem</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">Qt</span><span class="p">::</span><span class="n">ItemIsEditable</span><span class="p">);</span>

        <span class="nb">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">rowCount</span><span class="p">();</span>
        <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row</span><span class="p">);</span>
        <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">fileNameItem</span><span class="p">);</span>
        <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sizeItem</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">filesFoundLabel</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;%n file(s) found (Double click on a file to open it)&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">paths</span><span class="o">.</span><span class="n">size</span><span class="p">()));</span>
    <span class="n">filesFoundLabel</span><span class="o">-&gt;</span><span class="n">setWordWrap</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Both the <code class="docutils literal"><span class="pre">findFiles()</span></code> and <code class="docutils literal"><span class="pre">showFiles()</span></code> functions are called from the <code class="docutils literal"><span class="pre">find()</span></code> slot. In the <code class="docutils literal"><span class="pre">showFiles()</span></code> function we run through the provided list of file names, adding each relative file name to the first column in the table widget and retrieving the file’s size using <a class="reference internal" href="../PySide2/QtCore/QFileInfo.html#PySide2.QtCore.QFileInfo" title="PySide2.QtCore.QFileInfo"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QFileInfo</span></code></a> for the second column. We use <code class="xref py py-func docutils literal"><span class="pre">QLocale.formattedDataSize()</span></code> to format the file size in a human-readable form. For later use, we set the absolute path as a data on the <a class="reference internal" href="../PySide2/QtWidgets/QTableWidget.html#PySide2.QtWidgets.QTableWidget" title="PySide2.QtWidgets.QTableWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTableWidget</span></code></a> using the the role absoluteFileNameRole defined to be <code class="xref py py-attr docutils literal"><span class="pre">Qt.UserRole</span></code> + 1.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">enum</span> <span class="p">{</span> <span class="n">absoluteFileNameRole</span> <span class="o">=</span> <span class="n">Qt</span><span class="p">::</span><span class="n">UserRole</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">};</span>
</pre></div>
</div>
<p>This allows for retrieving the name of an item using a convenience function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">static</span> <span class="n">inline</span> <span class="n">QString</span> <span class="n">fileNameOfItem</span><span class="p">(</span><span class="n">const</span> <span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">item</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">item</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">(</span><span class="n">absoluteFileNameRole</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We also update the total number of files found.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QComboBox</span> <span class="o">*</span><span class="n">Window</span><span class="p">::</span><span class="n">createComboBox</span><span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QComboBox</span> <span class="o">*</span><span class="n">comboBox</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QComboBox</span><span class="p">;</span>
    <span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">setEditable</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
    <span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
    <span class="n">comboBox</span><span class="o">-&gt;</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">QSizePolicy</span><span class="p">::</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QSizePolicy</span><span class="p">::</span><span class="n">Preferred</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">comboBox</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The private <code class="docutils literal"><span class="pre">createComboBox()</span></code> function is also called from the contructor. We create a <a class="reference internal" href="../PySide2/QtWidgets/QComboBox.html#PySide2.QtWidgets.QComboBox" title="PySide2.QtWidgets.QComboBox"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QComboBox</span></code></a> with the given text, and make it editable.</p>
<p>When the user enters a new string in an editable combobox, the widget may or may not insert it, and it can insert it in several locations, depending on the <code class="xref py py-attr docutils literal"><span class="pre">QComboBox.InsertPolicy</span></code> . The default policy is is <code class="xref py py-attr docutils literal"><span class="pre">QComboBox.InsertAtBottom</span></code> .</p>
<p>Then we add the provided text to the combobox, and specify the widget’s size policies, before we return a pointer to the combobox.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Window</span><span class="p">::</span><span class="n">createFilesTable</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">filesTable</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QTableWidget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="p">::</span><span class="n">SelectRows</span><span class="p">);</span>

    <span class="n">QStringList</span> <span class="n">labels</span><span class="p">;</span>
    <span class="n">labels</span> <span class="o">&lt;&lt;</span> <span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Filename&quot;</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Size&quot;</span><span class="p">);</span>
    <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">setHorizontalHeaderLabels</span><span class="p">(</span><span class="n">labels</span><span class="p">);</span>
    <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QHeaderView</span><span class="p">::</span><span class="n">Stretch</span><span class="p">);</span>
    <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">hide</span><span class="p">();</span>
    <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">setShowGrid</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>

    <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">CustomContextMenu</span><span class="p">);</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">filesTable</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">QTableWidget</span><span class="p">::</span><span class="n">customContextMenuRequested</span><span class="p">,</span>
            <span class="n">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Window</span><span class="p">::</span><span class="n">contextMenu</span><span class="p">);</span>
    <span class="n">connect</span><span class="p">(</span><span class="n">filesTable</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">QTableWidget</span><span class="p">::</span><span class="n">cellActivated</span><span class="p">,</span>
            <span class="n">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Window</span><span class="p">::</span><span class="n">openFileOfItem</span><span class="p">);</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The private <code class="docutils literal"><span class="pre">createFilesTable()</span></code> function is called from the constructor. In this function we create the <a class="reference internal" href="../PySide2/QtWidgets/QTableWidget.html#PySide2.QtWidgets.QTableWidget" title="PySide2.QtWidgets.QTableWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTableWidget</span></code></a> that will display the search results. We set its horizontal headers and their resize mode.</p>
<p><a class="reference internal" href="../PySide2/QtWidgets/QTableWidget.html#PySide2.QtWidgets.QTableWidget" title="PySide2.QtWidgets.QTableWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTableWidget</span></code></a> inherits <a class="reference internal" href="../PySide2/QtWidgets/QTableView.html#PySide2.QtWidgets.QTableView" title="PySide2.QtWidgets.QTableView"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTableView</span></code></a> which provides a default model/view implementation of a table view. The <code class="xref py py-func docutils literal"><span class="pre">QTableView.horizontalHeader()</span></code> function returns the table view’s horizontal header as a <a class="reference internal" href="../PySide2/QtWidgets/QHeaderView.html#PySide2.QtWidgets.QHeaderView" title="PySide2.QtWidgets.QHeaderView"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QHeaderView</span></code></a> . The <a class="reference internal" href="../PySide2/QtWidgets/QHeaderView.html#PySide2.QtWidgets.QHeaderView" title="PySide2.QtWidgets.QHeaderView"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QHeaderView</span></code></a> class provides a header row or header column for item views, and the <code class="xref py py-func docutils literal"><span class="pre">QHeaderView.setResizeMode()</span></code> function sets the constraints on how the section in the header can be resized.</p>
<p>Finally, we hide the <a class="reference internal" href="../PySide2/QtWidgets/QTableWidget.html#PySide2.QtWidgets.QTableWidget" title="PySide2.QtWidgets.QTableWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTableWidget</span></code></a> ‘s vertical headers using the <code class="xref py py-func docutils literal"><span class="pre">QWidget.hide()</span></code> function, and remove the default grid drawn for the table using the <code class="xref py py-func docutils literal"><span class="pre">QTableView.setShowGrid()</span></code> function.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Window</span><span class="p">::</span><span class="n">openFileOfItem</span><span class="p">(</span><span class="nb">int</span> <span class="n">row</span><span class="p">,</span> <span class="nb">int</span> <span class="o">/*</span> <span class="n">column</span> <span class="o">*/</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">const</span> <span class="n">QTableWidgetItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="n">filesTable</span><span class="o">-&gt;</span><span class="n">item</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">openFile</span><span class="p">(</span><span class="n">fileNameOfItem</span><span class="p">(</span><span class="n">item</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">static</span> <span class="n">inline</span> <span class="n">void</span> <span class="n">openFile</span><span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">fileName</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QDesktopServices</span><span class="p">::</span><span class="n">openUrl</span><span class="p">(</span><span class="n">QUrl</span><span class="p">::</span><span class="n">fromLocalFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">openFileOfItem()</span></code> slot is invoked when the user double clicks on a cell in the table. The <code class="xref py py-func docutils literal"><span class="pre">QDesktopServices.openUrl()</span></code> knows how to open a file given the file name.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    filesTable-&gt;setContextMenuPolicy(Qt::CustomContextMenu);
    connect(filesTable, &amp;QTableWidget::customContextMenuRequested,
            this, &amp;Window::contextMenu);
    connect(filesTable, &amp;QTableWidget::cellActivated,
            this, &amp;Window::openFileOfItem);
void Window::contextMenu(const QPoint &amp;pos)
{
    const QTableWidgetItem *item = filesTable-&gt;itemAt(pos);
    if (!item)
        return;
    QMenu menu;
#ifndef QT_NO_CLIPBOARD
    QAction *copyAction = menu.addAction(&quot;Copy Name&quot;);
#endif
    QAction *openAction = menu.addAction(&quot;Open&quot;);
    QAction *action = menu.exec(filesTable-&gt;mapToGlobal(pos));
    if (!action)
        return;
    const QString fileName = fileNameOfItem(item);
    if (action == openAction)
        openFile(fileName);
#ifndef QT_NO_CLIPBOARD
    else if (action == copyAction)
        QGuiApplication::clipboard()-&gt;setText(QDir::toNativeSeparators(fileName));
#endif
}
</pre></div>
</div>
<p>We set the context menu policy to of the table view to <code class="xref py py-attr docutils literal"><span class="pre">Qt.CustomContextMenu</span></code> and connect a slot contextMenu() to its signal customContextMenuRequested(). We retrieve the absolute file name from the data of the <a class="reference internal" href="../PySide2/QtWidgets/QTableWidgetItem.html#PySide2.QtWidgets.QTableWidgetItem" title="PySide2.QtWidgets.QTableWidgetItem"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QTableWidgetItem</span></code></a> and populate the context menu with actions offering to copy the file name and to open the file.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="window-cpp-example-file">
<h1>window.cpp Example File<a class="headerlink" href="#window-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="window-h-example-file">
<h1>window.h Example File<a class="headerlink" href="#window-h-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="main-cpp-example-file">
<h1>main.cpp Example File<a class="headerlink" href="#main-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="findfiles-pro-example-file">
<h1>findfiles.pro Example File<a class="headerlink" href="#findfiles-pro-example-file" title="Permalink to this headline">¶</a></h1>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <p>© 2018 The Qt Company Ltd. Documentation contributions included herein are the copyrights of their respective owners. The documentation provided herein is licensed under the terms of the <a href="http://www.gnu.org/license/fdl.html">GNU Free Documentation License version 1.3</a> as published by the Free Software Foundation. Qt and respective logos are trademarks of The Qt Company Ltd. in Finland and/or other countries worldwide. All other trademarks are property of their respective owners.</p>
    </div></div>
    <div id="footer" class="footer">
    </div>
</div>
  </body>
</html>