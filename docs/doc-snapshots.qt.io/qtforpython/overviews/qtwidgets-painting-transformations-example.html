
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Transformations Example &#8212; Qt for Python (Technology Preview)</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.11.0~a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
  <link rel="stylesheet" type="text/css" href="/style/pyside.css" />
  <link rel="icon" type="image/png" href="/style/pyside-32px.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/style/pyside-16px.png" sizes="16x16" />
  <script type="text/javascript"> wpThemeFolder = 'http://qt.io/wp-content/themes/oneqt'; </script>
  <script type="text/javascript" src="/scripts/main.js"></script>
  <script type="text/javascript" src="/scripts/extras.js"></script>
  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-54043535-2', 'qt.io');
    ga('set', 'forceSSL', true);
    ga('send', 'pageview');
  </script>

  </head>
  <body>
<div id="container">
    <div class="header">
        <div class="header_container">
            <header id="navbar">
            </header>
        </div>
    </div>
    <div class="main">
        <div class="main-rounded">
            <div class="navigationbar">
                <ul class="sub-navigation">
                    <li><a href="http://wiki.qt.io/">Wiki</a></li>
                    <li><a href="https://doc.qt.io/">Documentation</a></li>
                    <li><a href="http://forum.qt.io/">Forum</a></li>
                    <li><a href="https://bugreports.qt.io/">Bug Reports</a></li>
                    <li><a href="https://codereview.qt-project.org/">Code Review</a></li>
                </ul>
                <div id="main_title_bar"><h1>Qt Documentation</h1></div>
                <div class="related">
                    <ul>
                        <li><a href="../index.html">Qt for Python (Technology Preview)</a></li> 
                    </ul>
                </div>
            </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Transformations Example</a><ul>
<li><a class="reference internal" href="#transformation-operations">Transformation Operations</a></li>
<li><a class="reference internal" href="#renderarea-class-definition">RenderArea Class Definition</a></li>
<li><a class="reference internal" href="#renderarea-class-implementation">RenderArea Class Implementation</a></li>
<li><a class="reference internal" href="#window-class-definition">Window Class Definition</a></li>
<li><a class="reference internal" href="#window-class-implementation">Window Class Implementation</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#renderarea-cpp-example-file">renderarea.cpp Example File</a></li>
<li><a class="reference internal" href="#renderarea-h-example-file">renderarea.h Example File</a></li>
<li><a class="reference internal" href="#window-cpp-example-file">window.cpp Example File</a></li>
<li><a class="reference internal" href="#window-h-example-file">window.h Example File</a></li>
<li><a class="reference internal" href="#main-cpp-example-file">main.cpp Example File</a></li>
<li><a class="reference internal" href="#transformations-pro-example-file">transformations.pro Example File</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" id="q" size="18" />
      <input type="submit" value="Go" id="search_button" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="transformations-example">
<span id="id1"></span><h1>Transformations Example<a class="headerlink" href="#transformations-example" title="Permalink to this headline">¶</a></h1>
<p>Transformations example shows how transformations influence the way that QPainter renders graphics primitives</p>
<blockquote>
<div><p>The Transformations example shows how transformations influence the way that <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> renders graphics primitives.</p>
<p>The Transformations example shows how transformations influence the way that <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> renders graphics primitives. In particular it shows how the order of transformations affect the result.</p>
<p>The application allows the user to manipulate the rendering of a shape by changing the translation, rotation and scale of <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s coordinate system.</p>
<p>The example consists of two classes and a global enum:</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">RenderArea</span></code> class controls the rendering of a given shape.</li>
<li>The <code class="docutils literal"><span class="pre">Window</span></code> class is the application’s main window.</li>
<li>The <code class="docutils literal"><span class="pre">Operation</span></code> enum describes the various transformation operations available in the application.</li>
</ul>
<p>First we will take a quick look at the <code class="docutils literal"><span class="pre">Operation</span></code> enum, then we will review the <code class="docutils literal"><span class="pre">RenderArea</span></code> class to see how a shape is rendered. Finally, we will take a look at the Transformations application’s features implemented in the <code class="docutils literal"><span class="pre">Window</span></code> class.</p>
</div></blockquote>
<div class="section" id="transformation-operations">
<span id="id2"></span><h2>Transformation Operations<a class="headerlink" href="#transformation-operations" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Normally, the <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> operates on the associated device’s own coordinate system, but it also has good support for coordinate transformations.</p>
<p>The default coordinate system of a paint device has its origin at the top-left corner. The x values increase to the right and the y values increase downwards. You can scale the coordinate system by a given offset using the <code class="xref py py-func docutils literal"><span class="pre">QPainter.scale()</span></code> function, you can rotate it clockwise using the <code class="xref py py-func docutils literal"><span class="pre">QPainter.rotate()</span></code> function and you can translate it (i.e. adding a given offset to the points) using the <code class="xref py py-func docutils literal"><span class="pre">QPainter.translate()</span></code> function. You can also twist the coordinate system around the origin (called shearing) using the <code class="xref py py-func docutils literal"><span class="pre">QPainter.shear()</span></code> function.</p>
<p>All the tranformation operations operate on <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s tranformation matrix that you can retrieve using the <code class="xref py py-func docutils literal"><span class="pre">QPainter.worldTransform()</span></code> function. A matrix transforms a point in the plane to another point. For more information about the transformation matrix, see the <a class="reference internal" href="qtquick-visualcanvas-topic.html#coordinate-system"><span class="std std-ref">Coordinate System</span></a> and <a class="reference internal" href="../PySide2/QtGui/QTransform.html#PySide2.QtGui.QTransform" title="PySide2.QtGui.QTransform"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QTransform</span></code></a> documentation.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">enum</span> <span class="n">Operation</span> <span class="p">{</span> <span class="n">NoTransformation</span><span class="p">,</span> <span class="n">Translate</span><span class="p">,</span> <span class="n">Rotate</span><span class="p">,</span> <span class="n">Scale</span> <span class="p">};</span>
</pre></div>
</div>
<p>The global <code class="docutils literal"><span class="pre">Operation</span></code> enum is declared in the <code class="docutils literal"><span class="pre">renderarea.h</span></code> file and describes the various transformation operations available in the Transformations application.</p>
</div></blockquote>
</div>
<div class="section" id="renderarea-class-definition">
<span id="id3"></span><h2>RenderArea Class Definition<a class="headerlink" href="#renderarea-class-definition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The <code class="docutils literal"><span class="pre">RenderArea</span></code> class inherits <a class="reference internal" href="../PySide2/QtWidgets/QWidget.html#PySide2.QtWidgets.QWidget" title="PySide2.QtWidgets.QWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QWidget</span></code></a> , and controls the rendering of a given shape.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">RenderArea</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QWidget</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>

<span class="n">public</span><span class="p">:</span>
    <span class="n">RenderArea</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">void</span> <span class="n">setOperations</span><span class="p">(</span><span class="n">const</span> <span class="n">QList</span><span class="o">&lt;</span><span class="n">Operation</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">operations</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">setShape</span><span class="p">(</span><span class="n">const</span> <span class="n">QPainterPath</span> <span class="o">&amp;</span><span class="n">shape</span><span class="p">);</span>

    <span class="n">QSize</span> <span class="n">minimumSizeHint</span><span class="p">()</span> <span class="n">const</span> <span class="n">override</span><span class="p">;</span>
    <span class="n">QSize</span> <span class="n">sizeHint</span><span class="p">()</span> <span class="n">const</span> <span class="n">override</span><span class="p">;</span>

<span class="n">protected</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">)</span> <span class="n">override</span><span class="p">;</span>
</pre></div>
</div>
<p>We declare two public functions, <code class="docutils literal"><span class="pre">setOperations()</span></code> and <code class="docutils literal"><span class="pre">setShape()</span></code> , to be able to specify the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget’s shape and to transform the coordinate system the shape is rendered within.</p>
<p>We reimplement the <a class="reference internal" href="../PySide2/QtWidgets/QWidget.html#PySide2.QtWidgets.QWidget" title="PySide2.QtWidgets.QWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QWidget</span></code></a> ‘s <code class="xref py py-func docutils literal"><span class="pre">QWidget.minimumSizeHint()</span></code> and <code class="xref py py-func docutils literal"><span class="pre">QWidget.sizeHint()</span></code> functions to give the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget a reasonable size within our application, and we reimplement the <code class="xref py py-func docutils literal"><span class="pre">QWidget.paintEvent()</span></code> event handler to draw the render area’s shape applying the user’s transformation choices.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">private</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">drawCoordinates</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">drawOutline</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">drawShape</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">transformPainter</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">);</span>

    <span class="n">QList</span><span class="o">&lt;</span><span class="n">Operation</span><span class="o">&gt;</span> <span class="n">operations</span><span class="p">;</span>
    <span class="n">QPainterPath</span> <span class="n">shape</span><span class="p">;</span>
    <span class="n">QRect</span> <span class="n">xBoundingRect</span><span class="p">;</span>
    <span class="n">QRect</span> <span class="n">yBoundingRect</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>We also declare several convenience functions to draw the shape, the coordinate system’s outline and the coordinates, and to transform the painter according to the chosen transformations.</p>
<p>In addition, the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget keeps a list of the currently applied transformation operations, a reference to its shape, and a couple of convenience variables that we will use when rendering the coordinates.</p>
</div></blockquote>
</div>
<div class="section" id="renderarea-class-implementation">
<span id="id4"></span><h2>RenderArea Class Implementation<a class="headerlink" href="#renderarea-class-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The <code class="docutils literal"><span class="pre">RenderArea</span></code> widget controls the rendering of a given shape, including the transformations of the coordinate system, by reimplementing the <code class="xref py py-func docutils literal"><span class="pre">QWidget.paintEvent()</span></code> event handler. But first we will take a quick look at the constructor and at the functions that provides access to the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">RenderArea</span><span class="p">::</span><span class="n">RenderArea</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
    <span class="p">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QFont</span> <span class="n">newFont</span> <span class="o">=</span> <span class="n">font</span><span class="p">();</span>
    <span class="n">newFont</span><span class="o">.</span><span class="n">setPixelSize</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
    <span class="n">setFont</span><span class="p">(</span><span class="n">newFont</span><span class="p">);</span>

    <span class="n">QFontMetrics</span> <span class="n">fontMetrics</span><span class="p">(</span><span class="n">newFont</span><span class="p">);</span>
    <span class="n">xBoundingRect</span> <span class="o">=</span> <span class="n">fontMetrics</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">));</span>
    <span class="n">yBoundingRect</span> <span class="o">=</span> <span class="n">fontMetrics</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the constructor we pass the parent parameter on to the base class, and customize the font that we will use to render the coordinates. The <code class="xref py py-func docutils literal"><span class="pre">QWidget.font()</span></code> function returns the font currently set for the widget. As long as no special font has been set, or after <code class="xref py py-func docutils literal"><span class="pre">QWidget.setFont()</span></code> is called, this is either a special font for the widget class, the parent’s font or (if this widget is a top level widget) the default application font.</p>
<p>After ensuring that the font’s size is 12 points, we extract the rectangles enclosing the coordinate letters, ‘x’ and ‘y’, using the <a class="reference internal" href="../PySide2/QtGui/QFontMetrics.html#PySide2.QtGui.QFontMetrics" title="PySide2.QtGui.QFontMetrics"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QFontMetrics</span></code></a> class.</p>
<p><a class="reference internal" href="../PySide2/QtGui/QFontMetrics.html#PySide2.QtGui.QFontMetrics" title="PySide2.QtGui.QFontMetrics"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QFontMetrics</span></code></a> provides functions to access the individual metrics of the font, its characters, and for strings rendered in the font. The <code class="xref py py-func docutils literal"><span class="pre">QFontMetrics.boundingRect()</span></code> function returns the bounding rectangle of the given character relative to the left-most point on the base line.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">setOperations</span><span class="p">(</span><span class="n">const</span> <span class="n">QList</span><span class="o">&lt;</span><span class="n">Operation</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">operations</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">this</span><span class="o">-&gt;</span><span class="n">operations</span> <span class="o">=</span> <span class="n">operations</span><span class="p">;</span>
    <span class="n">update</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">setShape</span><span class="p">(</span><span class="n">const</span> <span class="n">QPainterPath</span> <span class="o">&amp;</span><span class="n">shape</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">this</span><span class="o">-&gt;</span><span class="n">shape</span> <span class="o">=</span> <span class="n">shape</span><span class="p">;</span>
    <span class="n">update</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the <code class="docutils literal"><span class="pre">setShape()</span></code> and <code class="docutils literal"><span class="pre">setOperations()</span></code> functions we update the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget by storing the new value or values followed by a call to the <code class="xref py py-func docutils literal"><span class="pre">QWidget.update()</span></code> slot which schedules a paint event for processing when Qt returns to the main event loop.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QSize</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">minimumSizeHint</span><span class="p">()</span> <span class="n">const</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">QSize</span><span class="p">(</span><span class="mi">182</span><span class="p">,</span> <span class="mi">182</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">QSize</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">sizeHint</span><span class="p">()</span> <span class="n">const</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">QSize</span><span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="mi">232</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We reimplement the <a class="reference internal" href="../PySide2/QtWidgets/QWidget.html#PySide2.QtWidgets.QWidget" title="PySide2.QtWidgets.QWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QWidget</span></code></a> ‘s <code class="xref py py-func docutils literal"><span class="pre">QWidget.minimumSizeHint()</span></code> and <code class="xref py py-func docutils literal"><span class="pre">QWidget.sizeHint()</span></code> functions to give the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget a reasonable size within our application. The default implementations of these functions returns an invalid size if there is no layout for this widget, and returns the layout’s minimum size or preferred size, respectively, otherwise.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QPainter</span> <span class="n">painter</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">QPainter</span><span class="p">::</span><span class="n">Antialiasing</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="n">event</span><span class="o">-&gt;</span><span class="n">rect</span><span class="p">(),</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">white</span><span class="p">));</span>

    <span class="n">painter</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">66</span><span class="p">,</span> <span class="mi">66</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">paintEvent()</span></code> event handler receives the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget’s paint events. A paint event is a request to repaint all or part of the widget. It can happen as a result of <code class="xref py py-func docutils literal"><span class="pre">QWidget.repaint()</span></code> or <code class="xref py py-func docutils literal"><span class="pre">QWidget.update()</span></code> , or because the widget was obscured and has now been uncovered, or for many other reasons.</p>
<p>First we create a <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> for the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget. The <code class="xref py py-attr docutils literal"><span class="pre">QPainter.Antialiasing</span></code> render hint indicates that the engine should antialias edges of primitives if possible. Then we erase the area that needs to be repainted using the <code class="xref py py-func docutils literal"><span class="pre">QPainter.fillRect()</span></code> function.</p>
<p>We also translate the coordinate system with an constant offset to ensure that the original shape is renderend with a suitable margin.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">painter</span><span class="o">.</span><span class="n">save</span><span class="p">();</span>
<span class="n">transformPainter</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
<span class="n">drawShape</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
<span class="n">painter</span><span class="o">.</span><span class="n">restore</span><span class="p">();</span>
</pre></div>
</div>
<p>Before we start to render the shape, we call the <code class="xref py py-func docutils literal"><span class="pre">QPainter.save()</span></code> function.</p>
<p><code class="xref py py-func docutils literal"><span class="pre">QPainter.save()</span></code> saves the current painter state (i.e. pushes the state onto a stack) including the current coordinate system. The rationale for saving the painter state is that the following call to the <code class="docutils literal"><span class="pre">transformPainter()</span></code> function will transform the coordinate system depending on the currently chosen transformation operations, and we need a way to get back to the original state to draw the outline.</p>
<p>After transforming the coordinate system, we draw the <code class="docutils literal"><span class="pre">RenderArea</span></code> ‘s shape, and then we restore the painter state using the <code class="xref py py-func docutils literal"><span class="pre">QPainter.restore()</span></code> function (i.e. popping the saved state off the stack).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">drawOutline</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
</pre></div>
</div>
<p>Then we draw the square outline.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">transformPainter</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
    <span class="n">drawCoordinates</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since we want the coordinates to correspond with the coordinate system the shape is rendered within, we must make another call to the <code class="docutils literal"><span class="pre">transformPainter()</span></code> function.</p>
<p>The order of the painting operations is essential with respect to the shared pixels. The reason why we don’t render the coordinates when the coordinate system already is transformed to render the shape, but instead defer their rendering to the end, is that we want the coordinates to appear on top of the shape and its outline.</p>
<p>There is no need to save the <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> state this time since drawing the coordinates is the last painting operation.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">drawCoordinates</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">red</span><span class="p">);</span>

    <span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawText</span><span class="p">(</span><span class="mi">60</span> <span class="o">-</span> <span class="n">xBoundingRect</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                     <span class="mi">0</span> <span class="o">+</span> <span class="n">xBoundingRect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">tr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">));</span>

    <span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawText</span><span class="p">(</span><span class="mi">0</span> <span class="o">-</span> <span class="n">yBoundingRect</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                     <span class="mi">60</span> <span class="o">+</span> <span class="n">yBoundingRect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">tr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">drawOutline</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">darkGreen</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">DashLine</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">NoBrush</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">drawRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">drawShape</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">fillPath</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">Qt</span><span class="p">::</span><span class="n">blue</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">drawCoordinates()</span></code> , <code class="docutils literal"><span class="pre">drawOutline()</span></code> and <code class="docutils literal"><span class="pre">drawShape()</span></code> are convenience functions called from the <code class="docutils literal"><span class="pre">paintEvent()</span></code> event handler. For more information about <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s basic drawing operations and how to display basic graphics primitives, see the <a class="reference internal" href="qtwidgets-painting-basicdrawing-example.html#basic-drawing-example"><span class="std std-ref">Basic Drawing</span></a> example.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">RenderArea</span><span class="p">::</span><span class="n">transformPainter</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">operations</span><span class="o">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">switch</span> <span class="p">(</span><span class="n">operations</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">case</span> <span class="n">Translate</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="n">case</span> <span class="n">Scale</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="n">case</span> <span class="n">Rotate</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="n">case</span> <span class="n">NoTransformation</span><span class="p">:</span>
        <span class="n">default</span><span class="p">:</span>
            <span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">transformPainter()</span></code> convenience function is also called from the <code class="docutils literal"><span class="pre">paintEvent()</span></code> event handler, and transforms the given <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s coordinate system according to the user’s transformation choices.</p>
</div></blockquote>
</div>
<div class="section" id="window-class-definition">
<span id="id5"></span><h2>Window Class Definition<a class="headerlink" href="#window-class-definition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The <code class="docutils literal"><span class="pre">Window</span></code> class is the Transformations application’s main window.</p>
<p>The application displays four <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets. The left-most widget renders the shape in <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s default coordinate system, the others render the shape with the chosen transformation in addition to all the transformations applied to the <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets to their left.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Window</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QWidget</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>

<span class="n">public</span><span class="p">:</span>
    <span class="n">Window</span><span class="p">();</span>

<span class="n">public</span> <span class="n">slots</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">operationChanged</span><span class="p">();</span>
    <span class="n">void</span> <span class="n">shapeSelected</span><span class="p">(</span><span class="nb">int</span> <span class="n">index</span><span class="p">);</span>
</pre></div>
</div>
<p>We declare two public slots to make the application able to respond to user interaction, updating the displayed <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets according to the user’s transformation choices.</p>
<p>The <code class="docutils literal"><span class="pre">operationChanged()</span></code> slot updates each of the <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets applying the currently chosen transformation operations, and is called whenever the user changes the selected operations. The <code class="docutils literal"><span class="pre">shapeSelected()</span></code> slot updates the <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets’ shapes whenever the user changes the preferred shape.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">private</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">setupShapes</span><span class="p">();</span>

    <span class="n">enum</span> <span class="p">{</span> <span class="n">NumTransformedAreas</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">};</span>
    <span class="n">RenderArea</span> <span class="o">*</span><span class="n">originalRenderArea</span><span class="p">;</span>
    <span class="n">RenderArea</span> <span class="o">*</span><span class="n">transformedRenderAreas</span><span class="p">[</span><span class="n">NumTransformedAreas</span><span class="p">];</span>
    <span class="n">QComboBox</span> <span class="o">*</span><span class="n">shapeComboBox</span><span class="p">;</span>
    <span class="n">QComboBox</span> <span class="o">*</span><span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">NumTransformedAreas</span><span class="p">];</span>
    <span class="n">QList</span><span class="o">&lt;</span><span class="n">QPainterPath</span><span class="o">&gt;</span> <span class="n">shapes</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>We also declare a private convenience function, <code class="docutils literal"><span class="pre">setupShapes()</span></code> , that is used when constructing the <code class="docutils literal"><span class="pre">Window</span></code> widget, and we declare pointers to the various components of the widget. We choose to keep the available shapes in a <code class="xref py py-class docutils literal"><span class="pre">QList</span></code> of <a class="reference internal" href="../PySide2/QtGui/QPainterPath.html#PySide2.QtGui.QPainterPath" title="PySide2.QtGui.QPainterPath"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainterPath</span></code></a> s. In addition we declare a private enum counting the number of displayed <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets except the widget that renders the shape in <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s default coordinate system.</p>
</div></blockquote>
</div>
<div class="section" id="window-class-implementation">
<span id="id6"></span><h2>Window Class Implementation<a class="headerlink" href="#window-class-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>In the constructor we create and initialize the application’s components:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Window</span><span class="p">::</span><span class="n">Window</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">originalRenderArea</span> <span class="o">=</span> <span class="n">new</span> <span class="n">RenderArea</span><span class="p">;</span>

    <span class="n">shapeComboBox</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QComboBox</span><span class="p">;</span>
    <span class="n">shapeComboBox</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Clock&quot;</span><span class="p">));</span>
    <span class="n">shapeComboBox</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;House&quot;</span><span class="p">));</span>
    <span class="n">shapeComboBox</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Text&quot;</span><span class="p">));</span>
    <span class="n">shapeComboBox</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Truck&quot;</span><span class="p">));</span>

    <span class="n">QGridLayout</span> <span class="o">*</span><span class="n">layout</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QGridLayout</span><span class="p">;</span>
    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">originalRenderArea</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">shapeComboBox</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>First we create the <code class="docutils literal"><span class="pre">RenderArea</span></code> widget that will render the shape in the default coordinate system. We also create the associated <a class="reference internal" href="../PySide2/QtWidgets/QComboBox.html#PySide2.QtWidgets.QComboBox" title="PySide2.QtWidgets.QComboBox"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QComboBox</span></code></a> that allows the user to choose among four different shapes: A clock, a house, a text and a truck. The shapes themselves are created at the end of the constructor, using the <code class="docutils literal"><span class="pre">setupShapes()</span></code> convenience function.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">NumTransformedAreas</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">transformedRenderAreas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">RenderArea</span><span class="p">;</span>

    <span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QComboBox</span><span class="p">;</span>
    <span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;No transformation&quot;</span><span class="p">));</span>
    <span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Rotate by 60</span><span class="se">\xC2\xB0</span><span class="s2">&quot;</span><span class="p">));</span>
    <span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Scale to 75%&quot;</span><span class="p">));</span>
    <span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">addItem</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Translate by (50, 50)&quot;</span><span class="p">));</span>

    <span class="n">connect</span><span class="p">(</span><span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">activated</span><span class="p">(</span><span class="nb">int</span><span class="p">)),</span>
            <span class="n">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">operationChanged</span><span class="p">()));</span>

    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">transformedRenderAreas</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then we create the <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets that will render their shapes with coordinate tranformations. By default the applied operation is No Transformation, i.e. the shapes are rendered within the default coordinate system. We create and initialize the associated <a class="reference internal" href="../PySide2/QtWidgets/QComboBox.html#PySide2.QtWidgets.QComboBox" title="PySide2.QtWidgets.QComboBox"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QComboBox</span></code></a> es with items corresponding to the various transformation operations decribed by the global <code class="docutils literal"><span class="pre">Operation</span></code> enum.</p>
<p>We also connect the <a class="reference internal" href="../PySide2/QtWidgets/QComboBox.html#PySide2.QtWidgets.QComboBox" title="PySide2.QtWidgets.QComboBox"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QComboBox</span></code></a> es’ <code class="xref py py-func docutils literal"><span class="pre">QComboBox.activated()</span></code> signal to the <code class="docutils literal"><span class="pre">operationChanged()</span></code> slot to update the application whenever the user changes the selected transformation operations.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">);</span>
    <span class="n">setupShapes</span><span class="p">();</span>
    <span class="n">shapeSelected</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">setWindowTitle</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Transformations&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finally, we set the layout for the application window using the <code class="xref py py-func docutils literal"><span class="pre">QWidget.setLayout()</span></code> function, construct the available shapes using the private <code class="docutils literal"><span class="pre">setupShapes()</span></code> convenience function, and make the application show the clock shape on startup using the public <code class="docutils literal"><span class="pre">shapeSelected()</span></code> slot before we set the window title.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Window</span><span class="p">::</span><span class="n">setupShapes</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">QPainterPath</span> <span class="n">truck</span><span class="p">;</span>
    <span class="n">QPainterPath</span> <span class="n">clock</span><span class="p">;</span>
    <span class="n">QPainterPath</span> <span class="n">house</span><span class="p">;</span>
    <span class="n">QPainterPath</span> <span class="n">text</span><span class="p">;</span>
    <span class="o">...</span>
    <span class="n">shapes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clock</span><span class="p">);</span>
    <span class="n">shapes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">house</span><span class="p">);</span>
    <span class="n">shapes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
    <span class="n">shapes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">truck</span><span class="p">);</span>

    <span class="n">connect</span><span class="p">(</span><span class="n">shapeComboBox</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">activated</span><span class="p">(</span><span class="nb">int</span><span class="p">)),</span> <span class="n">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">shapeSelected</span><span class="p">(</span><span class="nb">int</span><span class="p">)));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">setupShapes()</span></code> function is called from the constructor and create the <a class="reference internal" href="../PySide2/QtGui/QPainterPath.html#PySide2.QtGui.QPainterPath" title="PySide2.QtGui.QPainterPath"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainterPath</span></code></a> objects representing the shapes that are used in the application. For construction details, see the <span class="xref std std-ref">window.cpp</span> example file. The shapes are stored in a <code class="xref py py-class docutils literal"><span class="pre">QList</span></code> . The <code class="xref py py-func docutils literal"><span class="pre">QList.append()</span></code> function inserts the given shape at the end of the list.</p>
<p>We also connect the associated <a class="reference internal" href="../PySide2/QtWidgets/QComboBox.html#PySide2.QtWidgets.QComboBox" title="PySide2.QtWidgets.QComboBox"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QComboBox</span></code></a> ‘s <code class="xref py py-func docutils literal"><span class="pre">QComboBox.activated()</span></code> signal to the <code class="docutils literal"><span class="pre">shapeSelected()</span></code> slot to update the application when the user changes the preferred shape.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Window</span><span class="p">::</span><span class="n">operationChanged</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">static</span> <span class="n">const</span> <span class="n">Operation</span> <span class="n">operationTable</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">NoTransformation</span><span class="p">,</span> <span class="n">Rotate</span><span class="p">,</span> <span class="n">Scale</span><span class="p">,</span> <span class="n">Translate</span>
    <span class="p">};</span>

    <span class="n">QList</span><span class="o">&lt;</span><span class="n">Operation</span><span class="o">&gt;</span> <span class="n">operations</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">NumTransformedAreas</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">operationComboBoxes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">currentIndex</span><span class="p">();</span>
        <span class="n">operations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">operationTable</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
        <span class="n">transformedRenderAreas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">setOperations</span><span class="p">(</span><span class="n">operations</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The public <code class="docutils literal"><span class="pre">operationChanged()</span></code> slot is called whenever the user changes the selected operations.</p>
<p>We retrieve the chosen transformation operation for each of the transformed <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets by querying the associated <a class="reference internal" href="../PySide2/QtWidgets/QComboBox.html#PySide2.QtWidgets.QComboBox" title="PySide2.QtWidgets.QComboBox"><code class="xref py py-class docutils literal"><span class="pre">QComboBoxes</span></code></a> . The transformed <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets are supposed to render the shape with the transformation specified by its associated combobox <em>in addition to</em> all the transformations applied to the <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets to its left. For that reason, for each widget we query, we append the associated operation to a <code class="xref py py-class docutils literal"><span class="pre">QList</span></code> of transformations which we apply to the widget before proceeding to the next.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Window</span><span class="p">::</span><span class="n">shapeSelected</span><span class="p">(</span><span class="nb">int</span> <span class="n">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QPainterPath</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">shapes</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
    <span class="n">originalRenderArea</span><span class="o">-&gt;</span><span class="n">setShape</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">NumTransformedAreas</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
        <span class="n">transformedRenderAreas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">setShape</span><span class="p">(</span><span class="n">shape</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">shapeSelected()</span></code> slot is called whenever the user changes the preferred shape, updating the <code class="docutils literal"><span class="pre">RenderArea</span></code> widgets using their public <code class="docutils literal"><span class="pre">setShape()</span></code> function.</p>
</div></blockquote>
</div>
<div class="section" id="summary">
<span id="id7"></span><h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Transformations example shows how transformations influence the way that <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> renders graphics primitives. Normally, the <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> operates on the device’s own coordinate system, but it also has good support for coordinate transformations. With the Transformations application you can scale, rotate and translate <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s coordinate system. The order in which these tranformations are applied is essential for the result.</p>
<p>All the tranformation operations operate on <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s tranformation matrix. For more information about the transformation matrix, see the <a class="reference internal" href="qtquick-visualcanvas-topic.html#coordinate-system"><span class="std std-ref">Coordinate System</span></a> and <a class="reference internal" href="../PySide2/QtGui/QTransform.html#PySide2.QtGui.QTransform" title="PySide2.QtGui.QTransform"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QTransform</span></code></a> documentation.</p>
<p>The Qt reference documentation provides several painting examples. Among these is the <a class="reference internal" href="qtwidgets-painting-affine-example.html#affine-transformations"><span class="std std-ref">Affine Transformations</span></a> example that shows Qt’s ability to perform transformations on painting operations. The example also allows the user to experiment with the various transformation operations.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="renderarea-cpp-example-file">
<h1>renderarea.cpp Example File<a class="headerlink" href="#renderarea-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="renderarea-h-example-file">
<h1>renderarea.h Example File<a class="headerlink" href="#renderarea-h-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="window-cpp-example-file">
<h1>window.cpp Example File<a class="headerlink" href="#window-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="window-h-example-file">
<h1>window.h Example File<a class="headerlink" href="#window-h-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="main-cpp-example-file">
<h1>main.cpp Example File<a class="headerlink" href="#main-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="transformations-pro-example-file">
<h1>transformations.pro Example File<a class="headerlink" href="#transformations-pro-example-file" title="Permalink to this headline">¶</a></h1>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <p>© 2018 The Qt Company Ltd. Documentation contributions included herein are the copyrights of their respective owners. The documentation provided herein is licensed under the terms of the <a href="http://www.gnu.org/license/fdl.html">GNU Free Documentation License version 1.3</a> as published by the Free Software Foundation. Qt and respective logos are trademarks of The Qt Company Ltd. in Finland and/or other countries worldwide. All other trademarks are property of their respective owners.</p>
    </div></div>
    <div id="footer" class="footer">
    </div>
</div>
  </body>
</html>