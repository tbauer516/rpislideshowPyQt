
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Concentric Circles Example &#8212; Qt for Python (Technology Preview)</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.11.0~a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
  <link rel="stylesheet" type="text/css" href="/style/pyside.css" />
  <link rel="icon" type="image/png" href="/style/pyside-32px.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/style/pyside-16px.png" sizes="16x16" />
  <script type="text/javascript"> wpThemeFolder = 'http://qt.io/wp-content/themes/oneqt'; </script>
  <script type="text/javascript" src="/scripts/main.js"></script>
  <script type="text/javascript" src="/scripts/extras.js"></script>
  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-54043535-2', 'qt.io');
    ga('set', 'forceSSL', true);
    ga('send', 'pageview');
  </script>

  </head>
  <body>
<div id="container">
    <div class="header">
        <div class="header_container">
            <header id="navbar">
            </header>
        </div>
    </div>
    <div class="main">
        <div class="main-rounded">
            <div class="navigationbar">
                <ul class="sub-navigation">
                    <li><a href="http://wiki.qt.io/">Wiki</a></li>
                    <li><a href="https://doc.qt.io/">Documentation</a></li>
                    <li><a href="http://forum.qt.io/">Forum</a></li>
                    <li><a href="https://bugreports.qt.io/">Bug Reports</a></li>
                    <li><a href="https://codereview.qt-project.org/">Code Review</a></li>
                </ul>
                <div id="main_title_bar"><h1>Qt Documentation</h1></div>
                <div class="related">
                    <ul>
                        <li><a href="../index.html">Qt for Python (Technology Preview)</a></li> 
                    </ul>
                </div>
            </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Concentric Circles Example</a><ul>
<li><a class="reference internal" href="#circlewidget-class-definition">CircleWidget Class Definition</a></li>
<li><a class="reference internal" href="#circlewidget-class-implementation">CircleWidget Class Implementation</a></li>
<li><a class="reference internal" href="#window-class-definition">Window Class Definition</a></li>
<li><a class="reference internal" href="#window-class-implementation">Window Class Implementation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#circlewidget-cpp-example-file">circlewidget.cpp Example File</a></li>
<li><a class="reference internal" href="#circlewidget-h-example-file">circlewidget.h Example File</a></li>
<li><a class="reference internal" href="#window-cpp-example-file">window.cpp Example File</a></li>
<li><a class="reference internal" href="#window-h-example-file">window.h Example File</a></li>
<li><a class="reference internal" href="#main-cpp-example-file">main.cpp Example File</a></li>
<li><a class="reference internal" href="#concentriccircles-pro-example-file">concentriccircles.pro Example File</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" id="q" size="18" />
      <input type="submit" value="Go" id="search_button" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="concentric-circles-example">
<span id="id1"></span><h1>Concentric Circles Example<a class="headerlink" href="#concentric-circles-example" title="Permalink to this headline">¶</a></h1>
<p>Demonstrates the improved quality that antialiasing and floating point precision gives</p>
<blockquote>
<div><p>Demonstrates the improved quality that antialiasing and floating point precision gives.</p>
<p>The Concentric Circles example shows the improved rendering quality that can be obtained using floating point precision and anti-aliasing when drawing custom widgets. The example also shows how to do simple animations.</p>
<p>The application’s main window displays several widgets which are drawn using the various combinations of precision and anti-aliasing.</p>
<p>Anti-aliasing is one of <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> ‘s render hints. The <code class="xref py py-class docutils literal"><span class="pre">QPainter.RenderHints</span></code> are used to specify flags to <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> that may, or may not, be respected by any given engine. <code class="xref py py-attr docutils literal"><span class="pre">QPainter.Antialiasing</span></code> indicates that the engine should anti-alias the edges of primitives if possible, i.e. put additional pixels around the original ones to smooth the edges.</p>
<p>The difference between floating point precision and integer precision is a matter of accuracy, and is visible in the application’s main window: Even though the logic that is calculating the circles’ geometry is the same, floating points ensure that the white spaces between each circle are of the same size, while integers make two and two circles appear as if they belong together. The reason is that the integer based precision rely on rounding off non-integer calculations.</p>
<p>The example consists of two classes:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">CircleWidget</span></code> is a custom widget which renders several animated concentric circles.</li>
<li><code class="docutils literal"><span class="pre">Window</span></code> is the application’s main window displaying four <code class="docutils literal"><span class="pre">CircleWidget</span></code>s drawn using different combinations of precision and aliasing.</li>
</ul>
<p>First we will review the CircleWidget class, then we will take a look at the Window class.</p>
</div></blockquote>
<div class="section" id="circlewidget-class-definition">
<span id="id2"></span><h2>CircleWidget Class Definition<a class="headerlink" href="#circlewidget-class-definition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The CircleWidget class inherits <a class="reference internal" href="../PySide2/QtWidgets/QWidget.html#PySide2.QtWidgets.QWidget" title="PySide2.QtWidgets.QWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QWidget</span></code></a> , and is a custom widget which renders several animated concentric circles.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CircleWidget</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QWidget</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>

<span class="n">public</span><span class="p">:</span>
    <span class="n">CircleWidget</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">void</span> <span class="n">setFloatBased</span><span class="p">(</span><span class="nb">bool</span> <span class="n">floatBased</span><span class="p">);</span>
    <span class="n">void</span> <span class="n">setAntialiased</span><span class="p">(</span><span class="nb">bool</span> <span class="n">antialiased</span><span class="p">);</span>

    <span class="n">QSize</span> <span class="n">minimumSizeHint</span><span class="p">()</span> <span class="n">const</span> <span class="n">override</span><span class="p">;</span>
    <span class="n">QSize</span> <span class="n">sizeHint</span><span class="p">()</span> <span class="n">const</span> <span class="n">override</span><span class="p">;</span>

<span class="n">public</span> <span class="n">slots</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">nextAnimationFrame</span><span class="p">();</span>

<span class="n">protected</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">)</span> <span class="n">override</span><span class="p">;</span>

<span class="n">private</span><span class="p">:</span>
    <span class="nb">bool</span> <span class="n">floatBased</span><span class="p">;</span>
    <span class="nb">bool</span> <span class="n">antialiased</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">frameNo</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>We declare the <code class="docutils literal"><span class="pre">floatBased</span></code> and <code class="docutils literal"><span class="pre">antialiased</span></code> variables to hold whether an instance of the class should be rendered with integer or float based precision, and whether the rendering should be anti-aliased or not. We also declare functions setting each of these variables.</p>
<p>In addition we reimplement the <code class="xref py py-func docutils literal"><span class="pre">QWidget.paintEvent()</span></code> function to apply the various combinations of precision and anti-aliasing when rendering, and to support the animation. We reimplement the <code class="xref py py-func docutils literal"><span class="pre">QWidget.minimumSizeHint()</span></code> and <code class="xref py py-func docutils literal"><span class="pre">QWidget.sizeHint()</span></code> functions to give the widget a reasonable size within our application.</p>
<p>We declare the private <code class="docutils literal"><span class="pre">nextAnimationFrame()</span></code> slot, and the associated <code class="docutils literal"><span class="pre">frameNo</span></code> variable holding the number of “animation frames” for the widget, to facilitate the animation.</p>
</div></blockquote>
</div>
<div class="section" id="circlewidget-class-implementation">
<span id="id3"></span><h2>CircleWidget Class Implementation<a class="headerlink" href="#circlewidget-class-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>In the constructor we make the widget’s rendering integer based and aliased by default:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CircleWidget</span><span class="p">::</span><span class="n">CircleWidget</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span>
    <span class="p">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">floatBased</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
    <span class="n">antialiased</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
    <span class="n">frameNo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">setBackgroundRole</span><span class="p">(</span><span class="n">QPalette</span><span class="p">::</span><span class="n">Base</span><span class="p">);</span>
    <span class="n">setSizePolicy</span><span class="p">(</span><span class="n">QSizePolicy</span><span class="p">::</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QSizePolicy</span><span class="p">::</span><span class="n">Expanding</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We initialize the widget’s <code class="docutils literal"><span class="pre">frameNo</span></code> variable, and set the widget’s background color using the QWidget::setBackgroundColor() function which takes a <code class="xref py py-attr docutils literal"><span class="pre">color</span> <span class="pre">role</span></code> as argument; the <code class="xref py py-attr docutils literal"><span class="pre">QPalette.Base</span></code> color role is typically white.</p>
<p>Then we set the widgets size policy using the <code class="xref py py-func docutils literal"><span class="pre">QWidget.setSizePolicy()</span></code> function. <code class="xref py py-attr docutils literal"><span class="pre">QSizePolicy.Expanding</span></code> means that the widget’s <code class="xref py py-func docutils literal"><span class="pre">QWidget.sizeHint()</span></code> is a sensible size, but that the widget can be shrunk and still be useful. The widget can also make use of extra space, so it should get as much space as possible.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CircleWidget</span><span class="p">::</span><span class="n">setFloatBased</span><span class="p">(</span><span class="nb">bool</span> <span class="n">floatBased</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">this</span><span class="o">-&gt;</span><span class="n">floatBased</span> <span class="o">=</span> <span class="n">floatBased</span><span class="p">;</span>
    <span class="n">update</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">CircleWidget</span><span class="p">::</span><span class="n">setAntialiased</span><span class="p">(</span><span class="nb">bool</span> <span class="n">antialiased</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">this</span><span class="o">-&gt;</span><span class="n">antialiased</span> <span class="o">=</span> <span class="n">antialiased</span><span class="p">;</span>
    <span class="n">update</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The public <code class="docutils literal"><span class="pre">setFloatBased()</span></code> and <code class="docutils literal"><span class="pre">setAntialiased()</span></code> functions update the widget’s rendering preferences, i.e. whether the widget should be rendered with integer or float based precision, and whether the rendering should be anti-aliased or not.</p>
<p>The functions also generate a paint event by calling the <code class="xref py py-func docutils literal"><span class="pre">QWidget.update()</span></code> function, forcing a repaint of the widget with the new rendering preferences.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QSize</span> <span class="n">CircleWidget</span><span class="p">::</span><span class="n">minimumSizeHint</span><span class="p">()</span> <span class="n">const</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">QSize</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">QSize</span> <span class="n">CircleWidget</span><span class="p">::</span><span class="n">sizeHint</span><span class="p">()</span> <span class="n">const</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">QSize</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The default implementations of the <code class="xref py py-func docutils literal"><span class="pre">QWidget.minimumSizeHint()</span></code> and <code class="xref py py-func docutils literal"><span class="pre">QWidget.sizeHint()</span></code> functions return invalid sizes if there is no layout for the widget, otherwise they return the layout’s minimum and preferred size, respectively.</p>
<p>We reimplement the functions to give the widget minimum and preferred sizes which are reasonable within our application.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CircleWidget</span><span class="p">::</span><span class="n">nextAnimationFrame</span><span class="p">()</span>
<span class="p">{</span>
    <span class="o">++</span><span class="n">frameNo</span><span class="p">;</span>
    <span class="n">update</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The nextAnimationFrame() slot simply increments the <code class="docutils literal"><span class="pre">frameNo</span></code> variable’s value, and calls the <code class="xref py py-func docutils literal"><span class="pre">QWidget.update()</span></code> function which schedules a paint event for processing when Qt returns to the main event loop.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">CircleWidget</span><span class="p">::</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QPainter</span> <span class="n">painter</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">QPainter</span><span class="p">::</span><span class="n">Antialiasing</span><span class="p">,</span> <span class="n">antialiased</span><span class="p">);</span>
    <span class="n">painter</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
<p>A paint event is a request to repaint all or part of the widget. The <code class="docutils literal"><span class="pre">paintEvent()</span></code> function is an event handler that can be reimplemented to receive the widget’s paint events. We reimplement the event handler to apply the various combinations of precision and anti-aliasing when rendering the widget, and to support the animation.</p>
<p>First, we create a <a class="reference internal" href="../PySide2/QtGui/QPainter.html#PySide2.QtGui.QPainter" title="PySide2.QtGui.QPainter"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPainter</span></code></a> for the widget, and set its antialiased flag to the widget’s preferred aliasing. We also translate the painters coordinate system, preparing to draw the widget’s cocentric circles. The translation ensures that the center of the circles will be equivalent to the widget’s center.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">diameter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">diameter</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">;</span> <span class="n">diameter</span> <span class="o">+=</span> <span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">int</span> <span class="n">delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">((</span><span class="n">frameNo</span> <span class="o">%</span> <span class="mi">128</span><span class="p">)</span> <span class="o">-</span> <span class="n">diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nb">int</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="p">(</span><span class="n">delta</span> <span class="o">*</span> <span class="n">delta</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">-</span> <span class="n">diameter</span><span class="p">;</span>
</pre></div>
</div>
<p>When painting a circle, we use the number of “animation frames” to determine the alpha channel of the circle’s color. The alpha channel specifies the color’s transparency effect, 0 represents a fully transparent color, while 255 represents a fully opaque color.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>        <span class="k">if</span> <span class="p">(</span><span class="n">alpha</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">QPen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="n">alpha</span><span class="p">),</span> <span class="mi">3</span><span class="p">));</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">floatBased</span><span class="p">)</span>
                <span class="n">painter</span><span class="o">.</span><span class="n">drawEllipse</span><span class="p">(</span><span class="n">QRectF</span><span class="p">(</span><span class="o">-</span><span class="n">diameter</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="n">diameter</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">diameter</span><span class="p">,</span> <span class="n">diameter</span><span class="p">));</span>
            <span class="k">else</span>
                <span class="n">painter</span><span class="o">.</span><span class="n">drawEllipse</span><span class="p">(</span><span class="n">QRect</span><span class="p">(</span><span class="o">-</span><span class="n">diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">diameter</span><span class="p">,</span> <span class="n">diameter</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the calculated alpha channel is fully transparent, we don’t draw anything since that would be equivalent to drawing a white circle on a white background. Instead we skip to the next circle still creating a white space. If the calculated alpha channel is fully opaque, we set the pen (the <a class="reference internal" href="../PySide2/QtGui/QColor.html#PySide2.QtGui.QColor" title="PySide2.QtGui.QColor"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QColor</span></code></a> passed to the <a class="reference internal" href="../PySide2/QtGui/QPen.html#PySide2.QtGui.QPen" title="PySide2.QtGui.QPen"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QPen</span></code></a> constructor is converted into the required <a class="reference internal" href="../PySide2/QtGui/QBrush.html#PySide2.QtGui.QBrush" title="PySide2.QtGui.QBrush"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtGui.QBrush</span></code></a> by default) and draw the circle. If the widget’s preferred precision is float based, we specify the circle’s bounding rectangle using <a class="reference internal" href="../PySide2/QtCore/QRectF.html#PySide2.QtCore.QRectF" title="PySide2.QtCore.QRectF"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QRectF</span></code></a> and double values, otherwise we use <a class="reference internal" href="../PySide2/QtCore/QRect.html#PySide2.QtCore.QRect" title="PySide2.QtCore.QRect"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QRect</span></code></a> and integers.</p>
<p>The animation is controlled by the public <code class="docutils literal"><span class="pre">nextAnimationFrame()</span></code> slot: Whenever the <code class="docutils literal"><span class="pre">nextAnimationFrame()</span></code> slot is called the number of frames is incremented and a paint event is scheduled. Then, when the widget is repainted, the alpha-blending of the circles’ colors change and the circles appear as animated.</p>
</div></blockquote>
</div>
<div class="section" id="window-class-definition">
<span id="id4"></span><h2>Window Class Definition<a class="headerlink" href="#window-class-definition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The Window class inherits <a class="reference internal" href="../PySide2/QtWidgets/QWidget.html#PySide2.QtWidgets.QWidget" title="PySide2.QtWidgets.QWidget"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QWidget</span></code></a> , and is the application’s main window rendering four <code class="docutils literal"><span class="pre">CircleWidget</span></code> s using different combinations of precision and aliasing.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Window</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QWidget</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>

<span class="n">public</span><span class="p">:</span>
    <span class="n">Window</span><span class="p">();</span>

<span class="n">private</span><span class="p">:</span>
    <span class="n">QLabel</span> <span class="o">*</span><span class="n">createLabel</span><span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">);</span>

    <span class="n">QLabel</span> <span class="o">*</span><span class="n">aliasedLabel</span><span class="p">;</span>
    <span class="n">QLabel</span> <span class="o">*</span><span class="n">antialiasedLabel</span><span class="p">;</span>
    <span class="n">QLabel</span> <span class="o">*</span><span class="n">intLabel</span><span class="p">;</span>
    <span class="n">QLabel</span> <span class="o">*</span><span class="n">floatLabel</span><span class="p">;</span>
    <span class="n">CircleWidget</span> <span class="o">*</span><span class="n">circleWidgets</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>
</pre></div>
</div>
<p>We declare the various components of the main window, i.e., the text labels and a double array that will hold reference to the four <code class="docutils literal"><span class="pre">CircleWidget</span></code> s. In addition we declare the private <code class="docutils literal"><span class="pre">createLabel()</span></code> function to simplify the constructor.</p>
</div></blockquote>
</div>
<div class="section" id="window-class-implementation">
<span id="id5"></span><h2>Window Class Implementation<a class="headerlink" href="#window-class-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Window</span><span class="p">::</span><span class="n">Window</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">aliasedLabel</span> <span class="o">=</span> <span class="n">createLabel</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Aliased&quot;</span><span class="p">));</span>
    <span class="n">antialiasedLabel</span> <span class="o">=</span> <span class="n">createLabel</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Antialiased&quot;</span><span class="p">));</span>
    <span class="n">intLabel</span> <span class="o">=</span> <span class="n">createLabel</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Int&quot;</span><span class="p">));</span>
    <span class="n">floatLabel</span> <span class="o">=</span> <span class="n">createLabel</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Float&quot;</span><span class="p">));</span>

    <span class="n">QGridLayout</span> <span class="o">*</span><span class="n">layout</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QGridLayout</span><span class="p">;</span>
    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">aliasedLabel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">antialiasedLabel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">intLabel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">floatLabel</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>In the constructor, we first create the various labels and put them in a <a class="reference internal" href="../PySide2/QtWidgets/QGridLayout.html#PySide2.QtWidgets.QGridLayout" title="PySide2.QtWidgets.QGridLayout"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtWidgets.QGridLayout</span></code></a> .</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QTimer</span> <span class="o">*</span><span class="n">timer</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QTimer</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">circleWidgets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">CircleWidget</span><span class="p">;</span>
        <span class="n">circleWidgets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">setAntialiased</span><span class="p">(</span><span class="n">j</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">circleWidgets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">setFloatBased</span><span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>

        <span class="n">connect</span><span class="p">(</span><span class="n">timer</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">timeout</span><span class="p">()),</span>
                <span class="n">circleWidgets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">nextAnimationFrame</span><span class="p">()));</span>

        <span class="n">layout</span><span class="o">-&gt;</span><span class="n">addWidget</span><span class="p">(</span><span class="n">circleWidgets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then we create a <a class="reference internal" href="../PySide2/QtCore/QTimer.html#PySide2.QtCore.QTimer" title="PySide2.QtCore.QTimer"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QTimer</span></code></a> . The <a class="reference internal" href="../PySide2/QtCore/QTimer.html#PySide2.QtCore.QTimer" title="PySide2.QtCore.QTimer"><code class="xref py py-class docutils literal"><span class="pre">PySide2.QtCore.QTimer</span></code></a> class is a high-level programming interface for timers, and provides repetitive and single-shot timers.</p>
<p>We create a timer to facilitate the animation of our concentric circles; when we create the four CircleWidget instances (and add them to the layout), we connect the <code class="xref py py-func docutils literal"><span class="pre">QTimer.timeout()</span></code> signal to each of the widgets’ <code class="docutils literal"><span class="pre">nextAnimationFrame()</span></code> slots.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">timer</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">);</span>

    <span class="n">setWindowTitle</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">&quot;Concentric Circles&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Before we set the layout and window title for our main window, we make the timer start with a timeout interval of 100 milliseconds, using the <code class="xref py py-func docutils literal"><span class="pre">QTimer.start()</span></code> function. That means that the <code class="xref py py-func docutils literal"><span class="pre">QTimer.timeout()</span></code> signal will be emitted, forcing a repaint of the four <code class="docutils literal"><span class="pre">CircleWidget</span></code> s, every 100 millisecond which is the reason the circles appear as animated.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">QLabel</span> <span class="o">*</span><span class="n">Window</span><span class="p">::</span><span class="n">createLabel</span><span class="p">(</span><span class="n">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">QLabel</span> <span class="o">*</span><span class="n">label</span> <span class="o">=</span> <span class="n">new</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
    <span class="n">label</span><span class="o">-&gt;</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="p">::</span><span class="n">AlignCenter</span><span class="p">);</span>
    <span class="n">label</span><span class="o">-&gt;</span><span class="n">setMargin</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">label</span><span class="o">-&gt;</span><span class="n">setFrameStyle</span><span class="p">(</span><span class="n">QFrame</span><span class="p">::</span><span class="n">Box</span> <span class="o">|</span> <span class="n">QFrame</span><span class="p">::</span><span class="n">Sunken</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">label</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The private <code class="docutils literal"><span class="pre">createLabel()</span></code> function is implemented to simlify the constructor.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="circlewidget-cpp-example-file">
<h1>circlewidget.cpp Example File<a class="headerlink" href="#circlewidget-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="circlewidget-h-example-file">
<h1>circlewidget.h Example File<a class="headerlink" href="#circlewidget-h-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="window-cpp-example-file">
<h1>window.cpp Example File<a class="headerlink" href="#window-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="window-h-example-file">
<h1>window.h Example File<a class="headerlink" href="#window-h-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="main-cpp-example-file">
<h1>main.cpp Example File<a class="headerlink" href="#main-cpp-example-file" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="concentriccircles-pro-example-file">
<h1>concentriccircles.pro Example File<a class="headerlink" href="#concentriccircles-pro-example-file" title="Permalink to this headline">¶</a></h1>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <p>© 2018 The Qt Company Ltd. Documentation contributions included herein are the copyrights of their respective owners. The documentation provided herein is licensed under the terms of the <a href="http://www.gnu.org/license/fdl.html">GNU Free Documentation License version 1.3</a> as published by the Free Software Foundation. Qt and respective logos are trademarks of The Qt Company Ltd. in Finland and/or other countries worldwide. All other trademarks are property of their respective owners.</p>
    </div></div>
    <div id="footer" class="footer">
    </div>
</div>
  </body>
</html>